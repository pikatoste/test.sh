---
layout: release
version: 0.1.0-SNAPSHOT-9f8e143
---
<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Runtest</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.10.2/application.js' type='text/javascript'></script>    
    <link href='./assets/0.10.2/application.css' media='screen, projection, print' rel='stylesheet' type='text/css'/>
    <link rel="shortcut icon" type="image/png" href="./assets/0.10.2/favicon_yellow.png" />
    <link rel="icon" type="image/png" href="./assets/0.10.2/favicon.png" />
  </head>
  
  <body>
    <div id="loading">
      <img src="./assets/0.10.2/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" style="display:none;">
      <div class="timestamp">Generated <abbr class="timeago" title="2020-03-04T23:07:06+00:00">2020-03-04T23:07:06+00:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent"><span class="yellow">87.45%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         51.72
       </span>
    </span> hits/line)
  </h2>
  <a name="AllFiles"></a>
  <div>
    <b>48</b> files in total.
    <b>1657</b> relevant lines. 
    <span class="green"><b>1449</b> lines covered</span> and
    <span class="red"><b>208</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#cf3720b7e3b89d3985223930383e9451b577db4e" class="src_link" title="test.sh">test.sh</a></td>
        <td class="red strong">75.9 %</td>
        <td>1121</td>
        <td>668</td>
        <td>507</td>
        <td>161</td>
        <td>125.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#8f9fb541975c90e69dc212d5d656ac29f8fae245" class="src_link" title="test/do_test_assert_71.sh">test/do_test_assert_71.sh</a></td>
        <td class="yellow strong">87.5 %</td>
        <td>27</td>
        <td>16</td>
        <td>14</td>
        <td>2</td>
        <td>1.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a7db846c9f66e01582f4ef478d4a5f2a3da25f5a" class="src_link" title="test/do_test_assert_nosubshell.sh">test/do_test_assert_nosubshell.sh</a></td>
        <td class="yellow strong">86.67 %</td>
        <td>24</td>
        <td>15</td>
        <td>13</td>
        <td>2</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#62c1e678fb00812d3af81ae83506859ace738e24" class="src_link" title="test/do_test_config_LOG_vars.sh">test/do_test_config_LOG_vars.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>4</td>
        <td>4</td>
        <td>0</td>
        <td>10.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9a40854605cf88dcb052c4ecdedba84c54779221" class="src_link" title="test/do_test_config_STACK_TRACE.sh">test/do_test_config_STACK_TRACE.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>19</td>
        <td>9</td>
        <td>9</td>
        <td>0</td>
        <td>2.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#7662fcb00f697d8dbf6167128a73efd662f1b4fc" class="src_link" title="test/do_test_error_reporting.sh">test/do_test_error_reporting.sh</a></td>
        <td class="yellow strong">87.5 %</td>
        <td>55</td>
        <td>32</td>
        <td>28</td>
        <td>4</td>
        <td>15.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#defa2f54ccb462e2ac95ceb4f401d0316076d272" class="src_link" title="test/do_test_ignored.sh">test/do_test_ignored.sh</a></td>
        <td class="yellow strong">88.89 %</td>
        <td>14</td>
        <td>9</td>
        <td>8</td>
        <td>1</td>
        <td>1.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f96e5293cd6ad011d92bd081929c50853f09d962" class="src_link" title="test/do_test_includes.sh">test/do_test_includes.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>9</td>
        <td>6</td>
        <td>6</td>
        <td>0</td>
        <td>1.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#36c0793e8833db0859fb5df312ecb0ac0719979d" class="src_link" title="test/do_test_inline.sh">test/do_test_inline.sh</a></td>
        <td class="red strong">71.43 %</td>
        <td>25</td>
        <td>14</td>
        <td>10</td>
        <td>4</td>
        <td>3.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#225ba862885f6e2e66eaac73054976d8a4c3dfc8" class="src_link" title="test/do_test_log.sh">test/do_test_log.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>11</td>
        <td>9</td>
        <td>9</td>
        <td>0</td>
        <td>1.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c2fdac3fc75b72565eb3d1c6bdea7e21e4a37ace" class="src_link" title="test/do_test_run_test_script_63.sh">test/do_test_run_test_script_63.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>4</td>
        <td>3</td>
        <td>3</td>
        <td>0</td>
        <td>1.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#d39b73029e3f0c65783443c86b2fe0097904e3bf" class="src_link" title="test/do_test_teardown.sh">test/do_test_teardown.sh</a></td>
        <td class="yellow strong">85.71 %</td>
        <td>21</td>
        <td>14</td>
        <td>12</td>
        <td>2</td>
        <td>3.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f4c9b3c040d8a4e84c4eb1c1508c53a4531b1b5d" class="src_link" title="test/do_test_teardown_fail.sh">test/do_test_teardown_fail.sh</a></td>
        <td class="red strong">66.67 %</td>
        <td>19</td>
        <td>12</td>
        <td>8</td>
        <td>4</td>
        <td>2.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c1fc5db1e2f3cd057bc28fb3c813938f9a350950" class="src_link" title="test/do_test_tmpdir_74.sh">test/do_test_tmpdir_74.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>10</td>
        <td>9</td>
        <td>9</td>
        <td>0</td>
        <td>2.9</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#5844447a8b8742a8f68752bf33f8ba3b7b1bb446" class="src_link" title="test/do_test_validate_value.sh">test/do_test_validate_value.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>2</td>
        <td>1</td>
        <td>1</td>
        <td>0</td>
        <td>3.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#5fe3f9d0d519fd9ceef67c149a2b6466913ca27a" class="src_link" title="test/files/_include_test1.sh">test/files/_include_test1.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>3</td>
        <td>1</td>
        <td>1</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#843b6534af01bda6cf77c90325856b705fb4dcd7" class="src_link" title="test/files/_include_test2.sh">test/files/_include_test2.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>3</td>
        <td>1</td>
        <td>1</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#44a7971f8e5490a87d9b72a69f2d876c8c54963e" class="src_link" title="test/files/test.sh.config.FILE">test/files/test.sh.config.FILE</a></td>
        <td class="green strong">100.0 %</td>
        <td>3</td>
        <td>3</td>
        <td>3</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#85af8e6f32696094c4de2e86ab093af64963f7fc" class="src_link" title="test/files/test.sh.config.default">test/files/test.sh.config.default</a></td>
        <td class="green strong">100.0 %</td>
        <td>4</td>
        <td>4</td>
        <td>4</td>
        <td>0</td>
        <td>2.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6494090a46d1ee11abaaa6366af2e9b07aa1e494" class="src_link" title="test/include/functions.sh">test/include/functions.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>29</td>
        <td>18</td>
        <td>18</td>
        <td>0</td>
        <td>8.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#06b7274d1ae8f943a7d2d81bdb11e38222a8dc95" class="src_link" title="test/test_assert.sh">test/test_assert.sh</a></td>
        <td class="green strong">95.56 %</td>
        <td>57</td>
        <td>45</td>
        <td>43</td>
        <td>2</td>
        <td>1.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#3094e1a7acf8b1329f2ca82f60a548a42be71e49" class="src_link" title="test/test_assert_71.sh">test/test_assert_71.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>13</td>
        <td>9</td>
        <td>9</td>
        <td>0</td>
        <td>1.8</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#733bedba99e36c2c63777d182f96d56eab733c05" class="src_link" title="test/test_assert_76.sh">test/test_assert_76.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>38</td>
        <td>31</td>
        <td>31</td>
        <td>0</td>
        <td>1.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#6a1e7ff026a96b6137adfc7367250c73afa41859" class="src_link" title="test/test_assert_escaping_62.sh">test/test_assert_escaping_62.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>17</td>
        <td>16</td>
        <td>16</td>
        <td>0</td>
        <td>1.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#f324393340da3127cee0439722a67db514abfe48" class="src_link" title="test/test_config.sh">test/test_config.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>73</td>
        <td>65</td>
        <td>65</td>
        <td>0</td>
        <td>1.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#5f3201a7bb7b65d34ea026ab3b3b86d94f3d02f9" class="src_link" title="test/test_config_FAIL_FAST.sh">test/test_config_FAIL_FAST.sh</a></td>
        <td class="green strong">95.24 %</td>
        <td>36</td>
        <td>21</td>
        <td>20</td>
        <td>1</td>
        <td>1.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#2fd1ca61dd9eaaa8ecc38daeca4d4d5f0d06c1fe" class="src_link" title="test/test_config_LOG_vars_50.sh">test/test_config_LOG_vars_50.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>49</td>
        <td>47</td>
        <td>47</td>
        <td>0</td>
        <td>1.0</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#93a6b220c100f9ec0e1e336b4bcf4ab3e1a0a781" class="src_link" title="test/test_config_STACK_TRACE.sh">test/test_config_STACK_TRACE.sh</a></td>
        <td class="yellow strong">84.38 %</td>
        <td>47</td>
        <td>32</td>
        <td>27</td>
        <td>5</td>
        <td>1.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#de8bc87d158233f652cc7b4d0ce88bdf4fd74f9e" class="src_link" title="test/test_error_reporting.sh">test/test_error_reporting.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>74</td>
        <td>60</td>
        <td>60</td>
        <td>0</td>
        <td>1.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#2b49e5a9cc85b7b93447cf6bbaf25f7e747c9f55" class="src_link" title="test/test_eval_syntax_error.sh">test/test_eval_syntax_error.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>29</td>
        <td>28</td>
        <td>28</td>
        <td>0</td>
        <td>1.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#c5d138650a3c92f908a4d127891f8b98d221e79a" class="src_link" title="test/test_exceptions.sh">test/test_exceptions.sh</a></td>
        <td class="yellow strong">89.19 %</td>
        <td>126</td>
        <td>111</td>
        <td>99</td>
        <td>12</td>
        <td>1.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#aaaab36669de44972e61a22772132ea24d989825" class="src_link" title="test/test_ignored.sh">test/test_ignored.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>10</td>
        <td>8</td>
        <td>8</td>
        <td>0</td>
        <td>1.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#b31f2876e7e798cdc7ad70bf0337c5684a339408" class="src_link" title="test/test_includes.sh">test/test_includes.sh</a></td>
        <td class="yellow strong">87.18 %</td>
        <td>51</td>
        <td>39</td>
        <td>34</td>
        <td>5</td>
        <td>1.6</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#b193d6c21d0be1ca93a7ab4e1b6f7e98461964e0" class="src_link" title="test/test_inline.sh">test/test_inline.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>34</td>
        <td>30</td>
        <td>30</td>
        <td>0</td>
        <td>1.2</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#1237a4a8a0a998ba9a0991036f5d9bf909162e62" class="src_link" title="test/test_log.sh">test/test_log.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>19</td>
        <td>14</td>
        <td>14</td>
        <td>0</td>
        <td>1.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#b8e482dca8cf4901d577b700f5b6638eaae975f3" class="src_link" title="test/test_prune_path_cache.sh">test/test_prune_path_cache.sh</a></td>
        <td class="yellow strong">88.89 %</td>
        <td>23</td>
        <td>18</td>
        <td>16</td>
        <td>2</td>
        <td>1.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#d4b5b405bfebca59984990ac443037607146521f" class="src_link" title="test/test_regression_30.sh">test/test_regression_30.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>6</td>
        <td>4</td>
        <td>4</td>
        <td>0</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#e47dac01100b7306070a9dd01a105b9f9e335093" class="src_link" title="test/test_regression_31.sh">test/test_regression_31.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>29</td>
        <td>27</td>
        <td>27</td>
        <td>0</td>
        <td>1.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#ad359d31a35b44a272dbc9eb20ef413b71c8ac46" class="src_link" title="test/test_regression_33.sh">test/test_regression_33.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>19</td>
        <td>17</td>
        <td>17</td>
        <td>0</td>
        <td>1.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#1898ca2c6f8628264ea6019064ef19acf24d93f3" class="src_link" title="test/test_run_test_script_63.sh">test/test_run_test_script_63.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>12</td>
        <td>10</td>
        <td>10</td>
        <td>0</td>
        <td>1.4</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#770a5e374ec1fe63c5d017bea753f0a9e2509a14" class="src_link" title="test/test_script.sh">test/test_script.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>8</td>
        <td>7</td>
        <td>7</td>
        <td>0</td>
        <td>1.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#9c6b4db6560f8568581a02ebc630c229ebe56123" class="src_link" title="test/test_setup_error.sh">test/test_setup_error.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>21</td>
        <td>18</td>
        <td>18</td>
        <td>0</td>
        <td>1.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#64e7f2a3975d1562851f535a28476679b5c6b77a" class="src_link" title="test/test_teardown.sh">test/test_teardown.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>38</td>
        <td>37</td>
        <td>37</td>
        <td>0</td>
        <td>1.1</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#b941657af0408779bdf2db8a766a0ed1eca9a734" class="src_link" title="test/test_teardown_fail.sh">test/test_teardown_fail.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>19</td>
        <td>16</td>
        <td>16</td>
        <td>0</td>
        <td>1.3</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#a4eac75cf3c40a3cb4839333cc397e7f971c85f3" class="src_link" title="test/test_test_functions.sh">test/test_test_functions.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>77</td>
        <td>74</td>
        <td>74</td>
        <td>0</td>
        <td>1.5</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#85ae01bfc716e6e78cf21a8e6658f22224afa918" class="src_link" title="test/test_tmpdir_74.sh">test/test_tmpdir_74.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>13</td>
        <td>10</td>
        <td>10</td>
        <td>0</td>
        <td>1.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#0aaea5517b92e10bbc0aa4e6f623cc4a45cec038" class="src_link" title="test/test_validate_value_56.sh">test/test_validate_value_56.sh</a></td>
        <td class="yellow strong">88.89 %</td>
        <td>10</td>
        <td>9</td>
        <td>8</td>
        <td>1</td>
        <td>1.7</td>
      </tr>
      
      <tr>
        <td class="strong"><a href="#fe010246a8b1bf573ca439b2eb96deaee12a1149" class="src_link" title="test/test_xxx_tmpfiles_74.sh">test/test_xxx_tmpfiles_74.sh</a></td>
        <td class="green strong">100.0 %</td>
        <td>7</td>
        <td>6</td>
        <td>6</td>
        <td>0</td>
        <td>1.8</td>
      </tr>
      
    </tbody>
  </table>
</div>


        
      </div>
    
      <div id="footer">
        Generated by <a href="http://github.com/colszowka/simplecov">simplecov</a> v0.15.1 
        and simplecov-html v0.10.2<br/>
        using /bin/bash test/test_assert.sh, /bin/bash test/test_assert_71.sh, /bin/bash test/test_assert_76.sh, /bin/bash test/test_assert_escaping_62.sh, /bin/bash test/test_config.sh, /bin/bash test/test_config_FAIL_FAST.sh, /bin/bash test/test_config_LOG_vars_50.sh, /bin/bash test/test_config_STACK_TRACE.sh, /bin/bash test/test_error_reporting.sh, /bin/bash test/test_eval_syntax_error.sh, /bin/bash test/test_exceptions.sh, /bin/bash test/test_ignored.sh, /bin/bash test/test_includes.sh, /bin/bash test/test_inline.sh, /bin/bash test/test_log.sh, /bin/bash test/test_prune_path_cache.sh, /bin/bash test/test_regression_30.sh, /bin/bash test/test_regression_31.sh, /bin/bash test/test_regression_33.sh, /bin/bash test/test_run_test_script_63.sh, /bin/bash test/test_script.sh, /bin/bash test/test_setup_error.sh, /bin/bash test/test_teardown.sh, /bin/bash test/test_teardown_fail.sh, /bin/bash test/test_test_functions.sh, /bin/bash test/test_tmpdir_74.sh, /bin/bash test/test_validate_value_56.sh, /bin/bash test/test_xxx_tmpfiles_74.sh
      </div>
    
      <div class="source_files">
      
        <div class="source_table" id="cf3720b7e3b89d3985223930383e9451b577db4e">
  <div class="header">
    <h3>test.sh</h3>
    <h4><span class="red">75.9 %</span> covered</h4>
    <div>
      <b>668</b> relevant lines. 
      <span class="green"><b>507</b> lines covered</span> and
      <span class="red"><b>161</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="129" data-linenumber="1">
          <span class="hits">129</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"># MIT License</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"># Copyright (c) 2020 pikatoste</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"># Permission is hereby granted, free of charge, to any person obtaining a copy</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"># of this software and associated documentation files (the &quot;Software&quot;), to deal</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"># in the Software without restriction, including without limitation the rights</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"># copies of the Software, and to permit persons to whom the Software is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"># furnished to do so, subject to the following conditions:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"># The above copyright notice and this permission notice shall be included in all</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"># copies or substantial portions of the Software.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"># SOFTWARE.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"># See https://github.com/pikatoste/test.sh/</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="28">
          <span class="hits">83</span>
          
          <code class="ruby">[[ ! $_TESTS_RUNNER ]] || return 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="30">
          <span class="hits">83</span>
          
          <code class="ruby">set -o errexit -o errtrace -o pipefail</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="31">
          <span class="hits">83</span>
          
          <code class="ruby">shopt -s inherit_errexit expand_aliases</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="33">
          <span class="hits">83</span>
          
          <code class="ruby">alias @test:=&#39;define_test&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="34">
          <span class="hits">83</span>
          
          <code class="ruby">alias @body:=&#39;validate@body&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="35">
          <span class="hits">83</span>
          
          <code class="ruby">alias @skip=&#39;_SKIP=1 &#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="36">
          <span class="hits">83</span>
          
          <code class="ruby">alias @timeout=&#39;_set_timeout &#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="37">
          <span class="hits">83</span>
          
          <code class="ruby">alias @setup_fixture:=&#39;setup_test_suite()&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="38">
          <span class="hits">83</span>
          
          <code class="ruby">alias @teardown_fixture:=&#39;teardown_test_suite()&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="39">
          <span class="hits">83</span>
          
          <code class="ruby">alias @setup:=&#39;setup_test()&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="40">
          <span class="hits">83</span>
          
          <code class="ruby">alias @teardown:=&#39;teardown_test()&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="41">
          <span class="hits">83</span>
          
          <code class="ruby">declare -A &#39;_testdescs&#39; &#39;_testskip&#39; &#39;_testtimeout&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="42">
          <span class="hits">83</span>
          
          <code class="ruby">_TEST_NUM=1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">_set_timeout() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">  _TIMEOUT=$1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">define_test() {</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="49">
          <span class="hits">43</span>
          
          <code class="ruby">  printf -v &#39;_testfunc&#39; &#39;test_%02d&#39; &quot;$_TEST_NUM&quot;</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="50">
          <span class="hits">43</span>
          
          <code class="ruby">  _testfuncs[_TEST_NUM]=$_testfunc</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="51">
          <span class="hits">43</span>
          
          <code class="ruby">  _testskip[$_testfunc]=$_SKIP</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="52">
          <span class="hits">43</span>
          
          <code class="ruby">  _testtimeout[$_testfunc]=$_TIMEOUT</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="53">
          <span class="hits">43</span>
          
          <code class="ruby">  _testdescs[$_testfunc]=${1:-$_testfunc}</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="54">
          <span class="hits">86</span>
          
          <code class="ruby">  eval &quot;alias @body:=&#39;validate@body; $_testfunc()&#39;&quot;</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="55">
          <span class="hits">43</span>
          
          <code class="ruby">  ((_TEST_NUM++))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="58">
          
          
          <code class="ruby">validate@body() {</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="59">
          <span class="hits">43</span>
          
          <code class="ruby">  [[ -v _testfunc ]] || throw &#39;test_syntax&#39; &#39;Misplaced @body: tag&#39;</code>
        </li>
      
        <li class="covered" data-hits="43" data-linenumber="60">
          <span class="hits">43</span>
          
          <code class="ruby">  unset &#39;_testfunc&#39; &#39;_SKIP&#39; &#39;_TIMEOUT&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="63">
          <span class="hits">83</span>
          
          <code class="ruby">alias try:=&quot;_try;(_try_prolog;&quot;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="64">
          <span class="hits">83</span>
          
          <code class="ruby">alias catch:=&quot;);_catch &#39;&#39;&amp;&amp;{&quot;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="65">
          <span class="hits">83</span>
          
          <code class="ruby">alias catch=&quot;);_catch &quot;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="66">
          <span class="hits">83</span>
          
          <code class="ruby">alias success:=&quot;}; _success&amp;&amp;{ enable_exceptions;&quot;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="67">
          <span class="hits">83</span>
          
          <code class="ruby">alias endtry=&quot;};_endtry&quot;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="68">
          <span class="hits">83</span>
          
          <code class="ruby">alias with_cause:=&#39;WITH_CAUSE= &#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="69">
          <span class="hits">83</span>
          
          <code class="ruby">alias exit=&#39;_exit&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="71">
          <span class="hits">83</span>
          
          <code class="ruby">_TMP_BASE=${TMPDIR:-/tmp}/tsh-$$</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="72">
          <span class="hits">83</span>
          
          <code class="ruby">_EXCEPTIONS_FILE=$_TMP_BASE&#39;-exceptions&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="73">
          <span class="hits">83</span>
          
          <code class="ruby">_TRY_VARS_FILE=$_TMP_BASE&#39;-tryvars&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="74">
          <span class="hits">83</span>
          
          <code class="ruby">_ERR_FILE=$_TMP_BASE&#39;-err&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="75">
          <span class="hits">83</span>
          
          <code class="ruby">declare -A &#39;_exceptions&#39; &#39;_exception_types&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="76">
          <span class="hits">83</span>
          
          <code class="ruby">declare -A &#39;_EXIT_HANDLERS&#39; &#39;_PRUNE_PATH_CACHE&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">declare_exception() {</code>
        </li>
      
        <li class="covered" data-hits="666" data-linenumber="79">
          <span class="hits">666</span>
          
          <code class="ruby">  local exception=$1 super=$2</code>
        </li>
      
        <li class="covered" data-hits="666" data-linenumber="80">
          <span class="hits">666</span>
          
          <code class="ruby">  _exceptions[$exception]=$super</code>
        </li>
      
        <li class="covered" data-hits="666" data-linenumber="81">
          <span class="hits">666</span>
          
          <code class="ruby">  type_of_exception $exception</code>
        </li>
      
        <li class="covered" data-hits="666" data-linenumber="82">
          <span class="hits">666</span>
          
          <code class="ruby">  _exception_types[$exception]=$exception_type</code>
        </li>
      
        <li class="covered" data-hits="1998" data-linenumber="83">
          <span class="hits">1998</span>
          
          <code class="ruby">  eval &quot;alias $exception:=\&quot;$exception_type&amp;&amp;{\&quot;; alias $exception,=\&quot;$exception_type \&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">type_of_exception() {</code>
        </li>
      
        <li class="covered" data-hits="666" data-linenumber="87">
          <span class="hits">666</span>
          
          <code class="ruby">  exception_type=$1</code>
        </li>
      
        <li class="covered" data-hits="666" data-linenumber="88">
          <span class="hits">666</span>
          
          <code class="ruby">  local x=$exception_type</code>
        </li>
      
        <li class="covered" data-hits="1164" data-linenumber="89">
          <span class="hits">1164</span>
          
          <code class="ruby">  while [[ ${_exceptions[$x]} ]]; do</code>
        </li>
      
        <li class="covered" data-hits="498" data-linenumber="90">
          <span class="hits">498</span>
          
          <code class="ruby">    x=${_exceptions[$x]}</code>
        </li>
      
        <li class="covered" data-hits="498" data-linenumber="91">
          <span class="hits">498</span>
          
          <code class="ruby">    exception_type=$x.$exception_type</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">exception_is() {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="96">
          <span class="hits">1</span>
          
          <code class="ruby">  local exception_type=${_exception_types[${_EXCEPTION[-1]}]:-${_EXCEPTION[-1]}}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="97">
          <span class="hits">1</span>
          
          <code class="ruby">  local exception_filter=${_exception_types[$1]:-$1}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="98">
          <span class="hits">1</span>
          
          <code class="ruby">  [[ $exception_type =~ ^$exception_filter ]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="101">
          <span class="hits">83</span>
          
          <code class="ruby">declare_exception &#39;nonzero&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="102">
          <span class="hits">83</span>
          
          <code class="ruby">declare_exception &#39;implicit&#39; &#39;nonzero&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="103">
          <span class="hits">83</span>
          
          <code class="ruby">declare_exception &#39;assert&#39; &#39;nonzero&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="104">
          <span class="hits">83</span>
          
          <code class="ruby">declare_exception &#39;error&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="105">
          <span class="hits">83</span>
          
          <code class="ruby">declare_exception &#39;test_syntax&#39; &#39;error&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="106">
          <span class="hits">83</span>
          
          <code class="ruby">declare_exception &#39;pending_exception&#39; &#39;error&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="107">
          <span class="hits">83</span>
          
          <code class="ruby">declare_exception &#39;eval_syntax&#39; &#39;error&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="108">
          <span class="hits">83</span>
          
          <code class="ruby">declare_exception &#39;timeout&#39; &#39;error&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">with_vars() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="111">
          
          
          <code class="ruby">  _TRY_VARS=$*</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">_try() {</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="115">
          <span class="hits">161</span>
          
          <code class="ruby">  push_caught_exception</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="116">
          <span class="hits">161</span>
          
          <code class="ruby">  disable_exceptions</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">save_vars() {</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="120">
          <span class="hits">14</span>
          
          <code class="ruby">  declare -p &quot;$@&quot; &gt;&quot;$_TRY_VARS_FILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">restore_vars() {</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="124">
          <span class="hits">14</span>
          
          <code class="ruby">  alias &#39;declare=declare -g&#39;</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="125">
          <span class="hits">14</span>
          
          <code class="ruby">  source &quot;$_TRY_VARS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="126">
          <span class="hits">14</span>
          
          <code class="ruby">  unalias &#39;declare&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">_exit() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="130">
          
          
          <code class="ruby">  _EXPLICIT_EXIT=1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="131">
          
          
          <code class="ruby">  builtin exit $1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">_exit() {</code>
        </li>
      
        <li class="covered" data-hits="244" data-linenumber="135">
          <span class="hits">244</span>
          
          <code class="ruby">  _EXPLICIT_EXIT=1</code>
        </li>
      
        <li class="covered" data-hits="244" data-linenumber="136">
          <span class="hits">244</span>
          
          <code class="ruby">  builtin exit $1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">check_exit_exception() {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">  # in case the ERR trap is not called but the exit status of a command different from exit is non-zero</code>
        </li>
      
        <li class="covered" data-hits="235" data-linenumber="141">
          <span class="hits">235</span>
          
          <code class="ruby">  [[ $_EXIT_CODE = 0 || -f $_EXCEPTIONS_FILE || $_EXPLICIT_EXIT ]] ||</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="142">
          <span class="hits">12</span>
          
          <code class="ruby">    first_frame=6 BASH_COMMAND=$_EXIT_COMMAND create_implicit_exception &quot;$_EXIT_CODE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">try_exit_handler() {</code>
        </li>
      
        <li class="covered" data-hits="144" data-linenumber="146">
          <span class="hits">144</span>
          
          <code class="ruby">  check_exit_exception</code>
        </li>
      
        <li class="covered" data-hits="158" data-linenumber="147">
          <span class="hits">158</span>
          
          <code class="ruby">  [[ $# = 0 ]] || save_vars &quot;$@&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">_try_prolog() {</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="151">
          <span class="hits">161</span>
          
          <code class="ruby">  enable_exceptions</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">  # TODO: glob expansion in _TRY_VARS</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="153">
          <span class="hits">161</span>
          
          <code class="ruby">  push_exit_handler &quot;try_exit_handler $_TRY_VARS&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">_catch() {</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="157">
          <span class="hits">161</span>
          
          <code class="ruby">  push_try_exit_code</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">  # TODO: _TRY_VARS corruption in try in catch</code>
        </li>
      
        <li class="covered" data-hits="175" data-linenumber="159">
          <span class="hits">175</span>
          
          <code class="ruby">  [[ ! $_TRY_VARS ]] || restore_vars</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="160">
          <span class="hits">161</span>
          
          <code class="ruby">  [[ -f $_EXCEPTIONS_FILE ]] || {</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="161">
          <span class="hits">141</span>
          
          <code class="ruby">    [[ $_TRY_EXIT_CODE != 0 ]] || return 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="162">
          <span class="hits">1</span>
          
          <code class="ruby">    builtin exit &quot;$_TRY_EXIT_CODE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="covered" data-hits="90" data-linenumber="164">
          <span class="hits">90</span>
          
          <code class="ruby">  [[ $_TRY_EXIT_CODE != 0 ]] || {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="165">
          
          
          <code class="ruby">    _TRY_EXIT_CODE=1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="166">
          
          
          <code class="ruby">    _TRY_EXIT_CODES[0]=1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="167">
          
          
          <code class="ruby">    create_exception &#39;pending_exception&#39; &quot;$_pending_exception_msg&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="covered" data-hits="90" data-linenumber="169">
          <span class="hits">90</span>
          
          <code class="ruby">  readarray -t _EXCEPTION &lt;&quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="90" data-linenumber="170">
          <span class="hits">90</span>
          
          <code class="ruby">  local exception_type=${_exception_types[${_EXCEPTION[-1]}]:-${_EXCEPTION[-1]}} exception_filter</code>
        </li>
      
        <li class="covered" data-hits="92" data-linenumber="171">
          <span class="hits">92</span>
          
          <code class="ruby">  for exception_filter in &quot;$@&quot;; do</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="172">
          <span class="hits">100</span>
          
          <code class="ruby">    [[ $exception_type =~ ^$exception_filter ]] || continue</code>
        </li>
      
        <li class="covered" data-hits="84" data-linenumber="173">
          <span class="hits">84</span>
          
          <code class="ruby">    rm -f &quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="84" data-linenumber="174">
          <span class="hits">84</span>
          
          <code class="ruby">    enable_exceptions</code>
        </li>
      
        <li class="covered" data-hits="84" data-linenumber="175">
          <span class="hits">84</span>
          
          <code class="ruby">    return 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="177">
          <span class="hits">6</span>
          
          <code class="ruby">  builtin exit &quot;$_TRY_EXIT_CODE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">disable_exceptions() {</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="181">
          <span class="hits">161</span>
          
          <code class="ruby">  set +e</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="182">
          <span class="hits">161</span>
          
          <code class="ruby">  trap - ERR</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">enable_exceptions() {</code>
        </li>
      
        <li class="covered" data-hits="405" data-linenumber="186">
          <span class="hits">405</span>
          
          <code class="ruby">  set -e</code>
        </li>
      
        <li class="covered" data-hits="405" data-linenumber="187">
          <span class="hits">405</span>
          
          <code class="ruby">  trap &#39;err_trap&#39; ERR</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">_success() {</code>
        </li>
      
        <li class="covered" data-hits="50" data-linenumber="191">
          <span class="hits">50</span>
          
          <code class="ruby">  [[ $_TRY_EXIT_CODES = 0 ]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">_endtry() {</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="195">
          <span class="hits">141</span>
          
          <code class="ruby">  pop_caught_exception</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="196">
          <span class="hits">141</span>
          
          <code class="ruby">  pop_try_exit_code</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="197">
          <span class="hits">141</span>
          
          <code class="ruby">  enable_exceptions</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="200">
          <span class="hits">83</span>
          
          <code class="ruby">_pending_exception_msg=&#39;Pending exception, probably a masked error in a command substitution&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">check_pending_exceptions() {</code>
        </li>
      
        <li class="covered" data-hits="167" data-linenumber="203">
          <span class="hits">167</span>
          
          <code class="ruby">  [[ ! -f $_EXCEPTIONS_FILE ]] ||</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="204">
          <span class="hits">2</span>
          
          <code class="ruby">    throw &#39;pending_exception&#39; &quot;$_pending_exception_msg&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">push_try_exit_code() {</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="208">
          <span class="hits">161</span>
          
          <code class="ruby">  _TRY_EXIT_CODE=$?</code>
        </li>
      
        <li class="covered" data-hits="161" data-linenumber="209">
          <span class="hits">161</span>
          
          <code class="ruby">  _TRY_EXIT_CODES=(&quot;$_TRY_EXIT_CODE&quot; &quot;${_TRY_EXIT_CODES[@]}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">pop_try_exit_code() {</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="213">
          <span class="hits">141</span>
          
          <code class="ruby">  _TRY_EXIT_CODE=$_TRY_EXIT_CODES</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="214">
          <span class="hits">141</span>
          
          <code class="ruby">  _TRY_EXIT_CODES=(&quot;${_TRY_EXIT_CODES[@]:1}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">push_caught_exception() {</code>
        </li>
      
        <li class="covered" data-hits="172" data-linenumber="218">
          <span class="hits">172</span>
          
          <code class="ruby">  [[ ! -v _EXCEPTION ]] || _CAUGHT_EXCEPTIONS=(&quot;${_EXCEPTION[*]@A}&quot; &quot;${_CAUGHT_EXCEPTIONS[@]}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">pop_caught_exception() {</code>
        </li>
      
        <li class="covered" data-hits="141" data-linenumber="222">
          <span class="hits">141</span>
          
          <code class="ruby">  if (( ${#_CAUGHT_EXCEPTIONS[@]} &gt; 0 )); then</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="223">
          <span class="hits">30</span>
          
          <code class="ruby">    eval &quot;$_CAUGHT_EXCEPTIONS&quot;</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="224">
          <span class="hits">10</span>
          
          <code class="ruby">    _CAUGHT_EXCEPTIONS=(&quot;${_CAUGHT_EXCEPTIONS[@]:1}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="covered" data-hits="131" data-linenumber="226">
          <span class="hits">131</span>
          
          <code class="ruby">    unset &#39;_EXCEPTION&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">failed() {</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="231">
          <span class="hits">36</span>
          
          <code class="ruby">  [[ $_TRY_EXIT_CODE != 0 ]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">throw() {</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="235">
          <span class="hits">22</span>
          
          <code class="ruby">  create_exception &quot;$@&quot;</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="236">
          <span class="hits">22</span>
          
          <code class="ruby">  builtin exit ${exit_code:-1}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">rethrow() {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="240">
          <span class="hits">1</span>
          
          <code class="ruby">  printf &quot;%s\n&quot; &quot;${_EXCEPTION[@]}&quot; &gt;&quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="241">
          <span class="hits">1</span>
          
          <code class="ruby">  builtin exit &quot;$_TRY_EXIT_CODE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">create_exception() {</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="245">
          <span class="hits">113</span>
          
          <code class="ruby">  local exception=$1</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="246">
          <span class="hits">113</span>
          
          <code class="ruby">  local exception_msg=$2</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="247">
          <span class="hits">113</span>
          
          <code class="ruby">  local first_frame=${first_frame:-2}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">  # TODO: only implicit and pending_exception exceptions should chain, others should throw a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">  #       pending exceptions found while handling exception ...</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="251">
          <span class="hits">113</span>
          
          <code class="ruby">  if [[ -f $_EXCEPTIONS_FILE ]]; then</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="252">
          <span class="hits">6</span>
          
          <code class="ruby">    local chain_reason=${CHAIN_REASON:-&#39;Pending exception&#39;}</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="253">
          <span class="hits">6</span>
          
          <code class="ruby">    echo -e &quot;${_RED}$chain_reason:${_NC}&quot; &gt;&gt;&quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="255">
          <span class="hits">113</span>
          
          <code class="ruby">  if [[ -v WITH_CAUSE ]]; then</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="256">
          <span class="hits">18</span>
          
          <code class="ruby">    { printf &quot;%s\n&quot; &quot;${_EXCEPTION[@]}&quot;; echo &quot;Caused by:&quot;; } &gt;&gt;&quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="258">
          <span class="hits">113</span>
          
          <code class="ruby">  local &#39;msg_lines&#39; i</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="259">
          <span class="hits">113</span>
          
          <code class="ruby">  readarray -t &#39;msg_lines&#39; &lt;&lt;&lt;&quot;$exception_msg&quot;</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="260">
          <span class="hits">113</span>
          
          <code class="ruby">  { stack_trace &quot;$first_frame&quot;</code>
        </li>
      
        <li class="covered" data-hits="458" data-linenumber="261">
          <span class="hits">458</span>
          
          <code class="ruby">    for ((i=${#msg_lines[@]}-1; i&gt;=0; i--)); do</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="262">
          <span class="hits">116</span>
          
          <code class="ruby">      echo &quot;${msg_lines[i]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="264">
          <span class="hits">113</span>
          
          <code class="ruby">    printf &quot;%d\n%s\n&quot; &quot;${#msg_lines[@]}&quot; &quot;$exception&quot;; } &gt;&gt;&quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">create_implicit_exception() {</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="268">
          <span class="hits">86</span>
          
          <code class="ruby">  local err=$1</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="269">
          <span class="hits">86</span>
          
          <code class="ruby">  local exception=${2:-&#39;implicit&#39;}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="270">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="271">
          <span class="hits">86</span>
          
          <code class="ruby">  local errcmd</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="272">
          
          
          <code class="ruby">  # TODO: truncate... do better</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="273">
          <span class="hits">86</span>
          
          <code class="ruby">  read -r errcmd &lt;&lt;&lt;&quot;$BASH_COMMAND&quot;</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="274">
          <span class="hits">86</span>
          
          <code class="ruby">  local first_frame=${first_frame:-4}</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="275">
          <span class="hits">86</span>
          
          <code class="ruby">  local frame_idx=$((first_frame-2))</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="276">
          <span class="hits">86</span>
          
          <code class="ruby">  prune_path &quot;${BASH_SOURCE[frame_idx]}&quot;</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="277">
          <span class="hits">86</span>
          
          <code class="ruby">  local errmsg=&quot;Error in ${FUNCNAME[frame_idx]}($_PRUNED_PATH:${BASH_LINENO[frame_idx-1]}): &#39;${errcmd}&#39; exited with status ${err}${_USE_ERR_FILE:+ and stderr:$(echo;cat &quot;$_ERR_FILE&quot;)}&quot;</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="278">
          <span class="hits">86</span>
          
          <code class="ruby">  [[ ! -f $_EXCEPTIONS_FILE ]] || {</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="279">
          <span class="hits">4</span>
          
          <code class="ruby">    local &#39;pending_exception&#39;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="280">
          <span class="hits">4</span>
          
          <code class="ruby">    readarray -t &#39;pending_exception&#39; &lt;&quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="281">
          <span class="hits">4</span>
          
          <code class="ruby">    exception=${pending_exception[-1]}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="covered" data-hits="258" data-linenumber="283">
          <span class="hits">258</span>
          
          <code class="ruby">  first_frame=$first_frame CHAIN_REASON=&#39;Previous exception&#39; create_exception &quot;$exception&quot; &quot;$errmsg&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="284">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">prune_path() {</code>
        </li>
      
        <li class="covered" data-hits="788" data-linenumber="287">
          <span class="hits">788</span>
          
          <code class="ruby">  if [[ $1 &amp;&amp; $1 != &#39;environment&#39; ]]; then</code>
        </li>
      
        <li class="covered" data-hits="394" data-linenumber="288">
          <span class="hits">394</span>
          
          <code class="ruby">    if [[ ${_PRUNE_PATH_CACHE[$1]} ]]; then</code>
        </li>
      
        <li class="covered" data-hits="173" data-linenumber="289">
          <span class="hits">173</span>
          
          <code class="ruby">      _PRUNED_PATH=${_PRUNE_PATH_CACHE[$1]}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="221" data-linenumber="291">
          <span class="hits">221</span>
          
          <code class="ruby">      local path</code>
        </li>
      
        <li class="covered" data-hits="442" data-linenumber="292">
          <span class="hits">442</span>
          
          <code class="ruby">      path=$(realpath &quot;$1&quot;)</code>
        </li>
      
        <li class="covered" data-hits="221" data-linenumber="293">
          <span class="hits">221</span>
          
          <code class="ruby">      _PRUNE_PATH_CACHE[$1]=${path##$PRUNE_PATH}</code>
        </li>
      
        <li class="covered" data-hits="221" data-linenumber="294">
          <span class="hits">221</span>
          
          <code class="ruby">      _PRUNED_PATH=${_PRUNE_PATH_CACHE[$1]}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="295">
          
          
          <code class="ruby">    fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="296">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="297">
          
          
          <code class="ruby">    _PRUNED_PATH=&quot;$1&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">stack_trace() {</code>
        </li>
      
        <li class="covered" data-hits="113" data-linenumber="302">
          <span class="hits">113</span>
          
          <code class="ruby">  if [[ $STACK_TRACE != &#39;no&#39; ]]; then</code>
        </li>
      
        <li class="covered" data-hits="69" data-linenumber="303">
          <span class="hits">69</span>
          
          <code class="ruby">    local i</code>
        </li>
      
        <li class="covered" data-hits="398" data-linenumber="304">
          <span class="hits">398</span>
          
          <code class="ruby">    for ((i=${#FUNCNAME[@]}-2; i&gt;=${1:-0}; i--))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby">    do</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="306">
          <span class="hits">130</span>
          
          <code class="ruby">      prune_path &quot;${BASH_SOURCE[i+1]}&quot;</code>
        </li>
      
        <li class="covered" data-hits="130" data-linenumber="307">
          <span class="hits">130</span>
          
          <code class="ruby">      echo &quot;${FUNCNAME[i+1]}($_PRUNED_PATH:${BASH_LINENO[i]})&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="covered" data-hits="69" data-linenumber="309">
          <span class="hits">69</span>
          
          <code class="ruby">    echo &quot;$((${#FUNCNAME[@]}-2-i))&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="covered" data-hits="44" data-linenumber="311">
          <span class="hits">44</span>
          
          <code class="ruby">    echo &#39;0&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="314">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">handle_exception() {</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="316">
          <span class="hits">20</span>
          
          <code class="ruby">  readarray -t &#39;_EXCEPTION&#39; &lt;&quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="317">
          <span class="hits">20</span>
          
          <code class="ruby">  rm -f &quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="318">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="319">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="320">
          
          
          <code class="ruby">print_exception() {</code>
        </li>
      
        <li class="covered" data-hits="91" data-linenumber="321">
          <span class="hits">91</span>
          
          <code class="ruby">  local log_function=${1:-&#39;log_err&#39;} i &#39;exception&#39; &#39;msg_count&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="322">
          
          
          <code class="ruby">  for ((i=${#_EXCEPTION[@]}-1; i&gt;=0; i--)); do</code>
        </li>
      
        <li class="covered" data-hits="106" data-linenumber="323">
          <span class="hits">106</span>
          
          <code class="ruby">    exception=${_EXCEPTION[i--]}</code>
        </li>
      
        <li class="covered" data-hits="106" data-linenumber="324">
          <span class="hits">106</span>
          
          <code class="ruby">    msg_count=$((i-${_EXCEPTION[i]}))</code>
        </li>
      
        <li class="covered" data-hits="106" data-linenumber="325">
          <span class="hits">106</span>
          
          <code class="ruby">      &quot;$log_function&quot; &quot;$exception exception: ${_EXCEPTION[--i]}&quot;</code>
        </li>
      
        <li class="covered" data-hits="218" data-linenumber="326">
          <span class="hits">218</span>
          
          <code class="ruby">    for ((i--; i&gt;=msg_count; i--)); do</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="327">
          <span class="hits">3</span>
          
          <code class="ruby">      &quot;$log_function&quot; &quot;${_EXCEPTION[i]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="covered" data-hits="106" data-linenumber="329">
          <span class="hits">106</span>
          
          <code class="ruby">    msg_count=$((i-${_EXCEPTION[i]}))</code>
        </li>
      
        <li class="covered" data-hits="858" data-linenumber="330">
          <span class="hits">858</span>
          
          <code class="ruby">    for ((i--; i&gt;=msg_count; i--)); do</code>
        </li>
      
        <li class="covered" data-hits="126" data-linenumber="331">
          <span class="hits">126</span>
          
          <code class="ruby">      &quot;$log_function&quot; &quot; at ${_EXCEPTION[i]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="covered" data-hits="121" data-linenumber="333">
          <span class="hits">121</span>
          
          <code class="ruby">    ((i&lt;0)) || &quot;$log_function&quot; &quot;${_EXCEPTION[i]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="336">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="337">
          
          
          <code class="ruby">xerr() {</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="338">
          <span class="hits">82</span>
          
          <code class="ruby">  _USE_ERR_FILE=1</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="339">
          <span class="hits">164</span>
          
          <code class="ruby">  eval &quot;$@&quot; 2&gt;&quot;$_ERR_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="340">
          <span class="hits">82</span>
          
          <code class="ruby">  _USE_ERR_FILE=</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="341">
          <span class="hits">82</span>
          
          <code class="ruby">  [[ ! $_XERR_PRINT ]] || {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="342">
          
          
          <code class="ruby">    local err</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="343">
          
          
          <code class="ruby">    readarray err &lt;&quot;$_ERR_FILE&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="344">
          
          
          <code class="ruby">    printf &quot;%s&quot; &quot;${err[@]}&quot; &gt;&amp;2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="345">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="347">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby">_eval() {</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="349">
          <span class="hits">39</span>
          
          <code class="ruby">  push_exit_handler &quot;create_eval_syntax_exception ${*@Q}&quot;</code>
        </li>
      
        <li class="covered" data-hits="133" data-linenumber="350">
          <span class="hits">133</span>
          
          <code class="ruby">  { eval &#39;{ pop_exit_handler;&#39; &quot;$@&quot; &#39;; } 2&gt;&amp;5&#39; ; } 5&gt;&amp;2 2&gt;&quot;$_ERR_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="351">
          <span class="hits">2</span>
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="352">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="353">
          <span class="hits">1</span>
          
          <code class="ruby">create_eval_syntax_exception() {</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="354">
          <span class="hits">3</span>
          
          <code class="ruby">  local errmsg</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="355">
          <span class="hits">6</span>
          
          <code class="ruby">  printf -v errmsg &quot;Syntax error in the expression: %s\n%s&quot; &quot;$*&quot; &quot;$(cat &quot;$_ERR_FILE&quot;)&quot;</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="356">
          <span class="hits">6</span>
          
          <code class="ruby">  first_frame=3 create_exception &#39;eval_syntax&#39; &quot;$errmsg&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="359">
          
          
          <code class="ruby">unhandled_exception() {</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="360">
          <span class="hits">20</span>
          
          <code class="ruby">  [[ $_EXIT_CODE != 0 ]] || {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="361">
          
          
          <code class="ruby">    _EXIT_CODE=1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="362">
          
          
          <code class="ruby">    first_frame=1 create_exception &#39;pending_exception&#39; &quot;$_pending_exception_msg&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="364">
          <span class="hits">20</span>
          
          <code class="ruby">  handle_exception</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="365">
          <span class="hits">20</span>
          
          <code class="ruby">  print_exception</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="366">
          <span class="hits">20</span>
          
          <code class="ruby">  unset &#39;_EXCEPTION&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="367">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="368">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">exit_trap() {</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="370">
          <span class="hits">227</span>
          
          <code class="ruby">  _EXIT_CODE=$?</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="371">
          <span class="hits">227</span>
          
          <code class="ruby">  _EXIT_COMMAND=$BASH_COMMAND</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="372">
          <span class="hits">227</span>
          
          <code class="ruby">  local handler i</code>
        </li>
      
        <li class="covered" data-hits="920" data-linenumber="373">
          <span class="hits">920</span>
          
          <code class="ruby">  for ((i=${_EXIT_HANDLERS[$BASHPID]}-1; i&gt;=0; i--)); do</code>
        </li>
      
        <li class="covered" data-hits="233" data-linenumber="374">
          <span class="hits">233</span>
          
          <code class="ruby">    handler=${_EXIT_HANDLERS[$BASHPID-$i]}</code>
        </li>
      
        <li class="covered" data-hits="466" data-linenumber="375">
          <span class="hits">466</span>
          
          <code class="ruby">    eval &quot;$handler&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="376">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="covered" data-hits="227" data-linenumber="377">
          <span class="hits">227</span>
          
          <code class="ruby">  exit &quot;$_EXIT_CODE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby">push_exit_handler() {</code>
        </li>
      
        <li class="covered" data-hits="286" data-linenumber="381">
          <span class="hits">286</span>
          
          <code class="ruby">  local handler_count=${_EXIT_HANDLERS[$BASHPID]}</code>
        </li>
      
        <li class="covered" data-hits="774" data-linenumber="382">
          <span class="hits">774</span>
          
          <code class="ruby">  [[ $handler_count ]] || { trap &#39;exit_trap&#39; EXIT; handler_count=0; }</code>
        </li>
      
        <li class="covered" data-hits="286" data-linenumber="383">
          <span class="hits">286</span>
          
          <code class="ruby">  _EXIT_HANDLERS[$BASHPID-$handler_count]=$1</code>
        </li>
      
        <li class="covered" data-hits="286" data-linenumber="384">
          <span class="hits">286</span>
          
          <code class="ruby">  _EXIT_HANDLERS[$BASHPID]=$((handler_count+1))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">pop_exit_handler() {</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="388">
          <span class="hits">36</span>
          
          <code class="ruby">  local handler_count=${_EXIT_HANDLERS[$BASHPID]}</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="389">
          <span class="hits">36</span>
          
          <code class="ruby">  _EXIT_HANDLERS[$BASHPID]=$((handler_count-1))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="391">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">err_trap() {</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="393">
          <span class="hits">82</span>
          
          <code class="ruby">  _ERR_CODE=$?</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="394">
          <span class="hits">86</span>
          
          <code class="ruby">  for handler in &quot;${_ERR_HANDLERS[@]}&quot;; do</code>
        </li>
      
        <li class="covered" data-hits="176" data-linenumber="395">
          <span class="hits">176</span>
          
          <code class="ruby">    eval &quot;$handler&quot; || true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="396">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="397">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="398">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby">push_err_handler() {</code>
        </li>
      
        <li class="covered" data-hits="107" data-linenumber="400">
          <span class="hits">107</span>
          
          <code class="ruby">  _ERR_HANDLERS=(&quot;$1&quot; &quot;${_ERR_HANDLERS[@]}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="402">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="403">
          
          
          <code class="ruby">pop_err_handler() {</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="404">
          <span class="hits">20</span>
          
          <code class="ruby">  _ERR_HANDLERS=(&quot;${_ERR_HANDLERS[@]:1}&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="406">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby">display_last_inline_test_result() {</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="408">
          <span class="hits">38</span>
          
          <code class="ruby">  if [[ $_EXIT_CODE == 0 ]]; then</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="409">
          <span class="hits">32</span>
          
          <code class="ruby">    display_test_passed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="410">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="411">
          <span class="hits">6</span>
          
          <code class="ruby">    display_test_failed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="412">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="413">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="414">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="415">
          
          
          <code class="ruby">start_test() {</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="416">
          <span class="hits">101</span>
          
          <code class="ruby">  [[ ! -v _MANAGED ]] || return</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="417">
          <span class="hits">101</span>
          
          <code class="ruby">  check_pending_exceptions</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="418">
          <span class="hits">101</span>
          
          <code class="ruby">  if [[ $_FIRST_TEST ]]; then</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="419">
          <span class="hits">40</span>
          
          <code class="ruby">    _setup_test_suite_called=1</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="420">
          <span class="hits">40</span>
          
          <code class="ruby">    call_setup_test_suite</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="421">
          <span class="hits">38</span>
          
          <code class="ruby">    _FIRST_TEST=</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="422">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="423">
          <span class="hits">61</span>
          
          <code class="ruby">    display_test_passed</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="424">
          <span class="hits">61</span>
          
          <code class="ruby">    unset _CURRENT_TEST_NAME</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="425">
          <span class="hits">61</span>
          
          <code class="ruby">    _teardown_test_called=1</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="426">
          <span class="hits">61</span>
          
          <code class="ruby">    call_teardown_if_exists &#39;teardown_test&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="427">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="covered" data-hits="99" data-linenumber="428">
          <span class="hits">99</span>
          
          <code class="ruby">  _CURRENT_TEST_NAME=&quot;$1&quot;</code>
        </li>
      
        <li class="covered" data-hits="99" data-linenumber="429">
          <span class="hits">99</span>
          
          <code class="ruby">  _teardown_test_called=</code>
        </li>
      
        <li class="covered" data-hits="116" data-linenumber="430">
          <span class="hits">116</span>
          
          <code class="ruby">   ! function_exists &#39;setup_test&#39; || setup_test</code>
        </li>
      
        <li class="covered" data-hits="97" data-linenumber="431">
          <span class="hits">97</span>
          
          <code class="ruby">  log_info &quot;Start test: $_CURRENT_TEST_NAME&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="432">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">display_test_passed() {</code>
        </li>
      
        <li class="covered" data-hits="110" data-linenumber="435">
          <span class="hits">110</span>
          
          <code class="ruby">  log_ok &quot;PASSED: ${_CURRENT_TEST_NAME}&quot;</code>
        </li>
      
        <li class="covered" data-hits="110" data-linenumber="436">
          <span class="hits">110</span>
          
          <code class="ruby">  printf &quot;${_GREEN}%${COLUMNS:+.$COLUMNS}s${_NC}\n&quot; &quot;${_INDENT}* ${_CURRENT_TEST_NAME}&quot; &gt;&amp;3</code>
        </li>
      
        <li class="covered" data-hits="110" data-linenumber="437">
          <span class="hits">110</span>
          
          <code class="ruby">  ((++_lines_out))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">display_test_failed() {</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="441">
          <span class="hits">21</span>
          
          <code class="ruby">  log_err &quot;FAILED: ${_CURRENT_TEST_NAME}&quot;</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="442">
          <span class="hits">21</span>
          
          <code class="ruby">  printf &quot;${_RED}%${COLUMNS:+.$COLUMNS}s${_NC}\n&quot; &quot;${_INDENT}* ${_CURRENT_TEST_NAME}&quot; &gt;&amp;3</code>
        </li>
      
        <li class="covered" data-hits="21" data-linenumber="443">
          <span class="hits">21</span>
          
          <code class="ruby">  ((++_lines_out))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="444">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="446">
          
          
          <code class="ruby">display_test_skipped() {</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="447">
          <span class="hits">5</span>
          
          <code class="ruby">  printf &quot;${_BLUE}%${COLUMNS:+.$COLUMNS}s${_NC}\n&quot; &quot;${_INDENT}* [skipped] $1&quot; &gt;&amp;3</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="448">
          <span class="hits">5</span>
          
          <code class="ruby">  ((++_lines_out))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="450">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">warn_teardown_failed() {</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="452">
          <span class="hits">22</span>
          
          <code class="ruby">  printf &quot;${_ORANGE}%${COLUMNS:+.$COLUMNS}s${_NC}\n&quot; &quot;${_INDENT}WARN: $1 failed&quot; &gt;&amp;3</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="453">
          <span class="hits">22</span>
          
          <code class="ruby">  ((++_lines_out))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="454">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="455">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="456">
          
          
          <code class="ruby">do_log() {</code>
        </li>
      
        <li class="covered" data-hits="554" data-linenumber="457">
          <span class="hits">554</span>
          
          <code class="ruby">  echo -e &quot;$*&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="459">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">log_info() {</code>
        </li>
      
        <li class="covered" data-hits="213" data-linenumber="461">
          <span class="hits">213</span>
          
          <code class="ruby">  do_log &quot;${_BLUE}[test.sh]${_NC} $*&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="462">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="463">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">log_ok() {</code>
        </li>
      
        <li class="covered" data-hits="117" data-linenumber="465">
          <span class="hits">117</span>
          
          <code class="ruby">  do_log &quot;${_GREEN}[test.sh]${_NC} $*&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="466">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="467">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby">log_warn() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="469">
          
          
          <code class="ruby">  do_log &quot;${_ORANGE}[test.sh]${_NC} $*&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="470">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="471">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">log_err() {</code>
        </li>
      
        <li class="covered" data-hits="224" data-linenumber="473">
          <span class="hits">224</span>
          
          <code class="ruby">  do_log &quot;${_RED}[test.sh]${_NC} $*&quot; &gt;&amp;2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="475">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="476">
          
          
          <code class="ruby">function_exists() {</code>
        </li>
      
        <li class="covered" data-hits="383" data-linenumber="477">
          <span class="hits">383</span>
          
          <code class="ruby">  declare -F &quot;$1&quot; &gt;/dev/null</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="479">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby">call_setup_test_suite() {</code>
        </li>
      
        <li class="covered" data-hits="112" data-linenumber="481">
          <span class="hits">112</span>
          
          <code class="ruby">  function_exists &#39;setup_test_suite&#39; || return 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="482">
          
          
          <code class="ruby">  # TODO: if exit but not err, the message is not printed, should use try/catch</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="483">
          <span class="hits">24</span>
          
          <code class="ruby">  push_err_handler &#39;printf &quot;${_RED}%${COLUMNS:+.$COLUMNS}s${_NC}\n&quot; &quot;[ERROR] setup_test_suite failed, see ${LOG_FILE##$PRUNE_PATH} for more information&quot; &gt;&amp;3; ((++_lines_out))&#39;</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="484">
          <span class="hits">24</span>
          
          <code class="ruby">  setup_test_suite</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="485">
          <span class="hits">20</span>
          
          <code class="ruby">  pop_err_handler</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="486">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="487">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="488">
          
          
          <code class="ruby">call_teardown_if_exists() {</code>
        </li>
      
        <li class="covered" data-hits="163" data-linenumber="489">
          <span class="hits">163</span>
          
          <code class="ruby">  ! function_exists &quot;$1&quot; || call_teardown &quot;$1&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="490">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="491">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby">call_teardown() {</code>
        </li>
      
        <li class="covered" data-hits="126" data-linenumber="493">
          <span class="hits">126</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="494">
          <span class="hits">63</span>
          
          <code class="ruby">    &quot;$1&quot;</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="495">
          <span class="hits">63</span>
          
          <code class="ruby">  catch:</code>
        </li>
      
        <li class="covered" data-hits="44" data-linenumber="496">
          <span class="hits">44</span>
          
          <code class="ruby">    [[ $ANIMATE ]] || warn_teardown_failed &quot;$1&quot;</code>
        </li>
      
        <li class="covered" data-hits="22" data-linenumber="497">
          <span class="hits">22</span>
          
          <code class="ruby">    print_exception</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="498">
          <span class="hits">63</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="499">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="500">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="501">
          
          
          <code class="ruby">run_test_script() {</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="502">
          <span class="hits">57</span>
          
          <code class="ruby">  local test_script</code>
        </li>
      
        <li class="covered" data-hits="171" data-linenumber="503">
          <span class="hits">171</span>
          
          <code class="ruby">  test_script=$(cd &quot;$TEST_SCRIPT_DIR&quot;; realpath &quot;$1&quot;)</code>
        </li>
      
        <li class="covered" data-hits="57" data-linenumber="504">
          <span class="hits">57</span>
          
          <code class="ruby">  shift</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="505">
          
          
          <code class="ruby">#  BASH_ENV=&lt;(declare -p _PRUNE_PATH_CACHE) _SUBTEST=&#39;&#39; &quot;$test_script&quot; &quot;$@&quot;</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="506">
          <span class="hits">62</span>
          
          <code class="ruby">  &quot;$test_script&quot; &quot;$@&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="507">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="508">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="509">
          <span class="hits">83</span>
          
          <code class="ruby">_spinner_chars=(- \\ \| /)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="510">
          
          
          <code class="ruby">create_spinners() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="511">
          
          
          <code class="ruby">  [[ ! $_spinner_pid ]] || kill_spinner</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="512">
          
          
          <code class="ruby">  _spinner_kill=</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="513">
          
          
          <code class="ruby">  ( disable_exceptions</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="514">
          
          
          <code class="ruby">    trap &#39;spinner_int_trap&#39; INT</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="515">
          
          
          <code class="ruby">    local linesup linesupcmd colsfcmd char i</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="516">
          
          
          <code class="ruby">    while true; do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="517">
          
          
          <code class="ruby">      [[ ! $_spinner_kill ]] || exit</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="518">
          
          
          <code class="ruby">      for char in &quot;${_spinner_chars[@]}&quot;; do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="519">
          
          
          <code class="ruby">        [[ ! $_spinner_kill ]] || exit</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="520">
          
          
          <code class="ruby">        for ((i=0; i&lt;${#_spinners[@]}; i++)); do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="521">
          
          
          <code class="ruby">          set ${_spinners[i]}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="522">
          
          
          <code class="ruby">          eval &quot;linesup=$1&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="523">
          
          
          <code class="ruby">          (( $linesup &lt; LINES )) || continue</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="524">
          
          
          <code class="ruby">          linesupcmd=</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="525">
          
          
          <code class="ruby">          colsfcmd=</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="526">
          
          
          <code class="ruby">          (( linesup &gt; 0 )) &amp;&amp; linesupcmd=&quot;cuu $linesup&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="527">
          
          
          <code class="ruby">          (( $2 &gt; 0 )) &amp;&amp; colsfcmd=&quot;cuf $2&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="528">
          
          
          <code class="ruby">          tput -S &lt;&lt;EOF</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="529">
          
          
          <code class="ruby">cub $COLUMNS</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="530">
          
          
          <code class="ruby">$colsfcmd</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="531">
          
          
          <code class="ruby">$linesupcmd</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="532">
          
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="533">
          
          
          <code class="ruby">          echo -n &quot;$char&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="534">
          
          
          <code class="ruby">          (( linesup &gt; 0 )) &amp;&amp; tput cud &quot;$linesup&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="535">
          
          
          <code class="ruby">          echo -ne &#39;\r&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="536">
          
          
          <code class="ruby">          [[ ! $_spinner_kill ]] || exit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="537">
          
          
          <code class="ruby">        done</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="538">
          
          
          <code class="ruby">        sleep 0.1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="539">
          
          
          <code class="ruby">      done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="540">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="541">
          
          
          <code class="ruby">  ) &amp;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="542">
          
          
          <code class="ruby">  _spinner_pid=$!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="543">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="544">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="545">
          
          
          <code class="ruby">spinner_int_trap() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="546">
          
          
          <code class="ruby">  _spinner_kill=1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="547">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="548">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="549">
          <span class="hits">83</span>
          
          <code class="ruby">declare -a _spinners</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="550">
          
          
          <code class="ruby">add_spinner() {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="551">
          
          
          <code class="ruby">  _spinners+=(&quot;$1 $2&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="552">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="553">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="554">
          
          
          <code class="ruby">kill_spinner() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="555">
          
          
          <code class="ruby">  [[ ! $_spinner_pid ]] || {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="556">
          
          
          <code class="ruby">    kill -INT &quot;$_spinner_pid&quot; &amp;&amp; wait &quot;$_spinner_pid&quot; || true</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="557">
          
          
          <code class="ruby">    _spinner_pid=</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="558">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="559">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="560">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="561">
          
          
          <code class="ruby">start_timeout() {</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="562">
          <span class="hits">32</span>
          
          <code class="ruby">  local timeout=${_testtimeout[$1]}</code>
        </li>
      
        <li class="covered" data-hits="96" data-linenumber="563">
          <span class="hits">96</span>
          
          <code class="ruby">  [[ $timeout ]] || { _timeout_pid=; return 0; }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="564">
          
          
          <code class="ruby">  local pid=$BASHPID</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="565">
          
          
          <code class="ruby">  _timeout=$timeout</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="566">
          
          
          <code class="ruby">  trap &#39;alarm_trap&#39; ALRM</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="567">
          
          
          <code class="ruby">  ( disable_exceptions; sleep &quot;$timeout&quot; &amp;&amp; kill -ALRM &quot;$pid&quot; &amp;&amp; pkill -INT -P &quot;$pid&quot; ) &amp;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="568">
          
          
          <code class="ruby">  _timeout_pid=$!</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="569">
          
          
          <code class="ruby">  push_exit_handler &#39;stop_timeout&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="570">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="571">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="572">
          
          
          <code class="ruby">stop_timeout() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="573">
          
          
          <code class="ruby">  pkill -INT -P &quot;$_timeout_pid&quot; || true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="574">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="575">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="576">
          
          
          <code class="ruby">alarm_trap() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="577">
          
          
          <code class="ruby">  throw &#39;timeout&#39; &quot;Test timed out after $_timeout seconds&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="578">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="579">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="580">
          
          
          <code class="ruby">run_tests() {</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="581">
          <span class="hits">28</span>
          
          <code class="ruby">  _MANAGED=</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="582">
          <span class="hits">28</span>
          
          <code class="ruby">  _failed_count=0</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="583">
          <span class="hits">28</span>
          
          <code class="ruby">  _error_count=0</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="584">
          <span class="hits">28</span>
          
          <code class="ruby">  _skipped_count=0</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="585">
          <span class="hits">28</span>
          
          <code class="ruby">  local &#39;test_func&#39; &#39;setupf&#39; &#39;teardownf&#39;</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="586">
          <span class="hits">28</span>
          
          <code class="ruby">  [[ ! $ANIMATE ]] || {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="587">
          
          
          <code class="ruby">    add_spinner &#39;$_lines_out&#39; 0</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="588">
          
          
          <code class="ruby">    create_spinners</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="589">
          
          
          <code class="ruby">  } &gt;&amp;3</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="590">
          <span class="hits">28</span>
          
          <code class="ruby">  call_setup_test_suite</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="591">
          <span class="hits">26</span>
          
          <code class="ruby">  ! function_exists &#39;setup_test&#39; || {</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="592">
          <span class="hits">12</span>
          
          <code class="ruby">    _TRY_VARS=&#39;_setup_passed&#39;</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="593">
          <span class="hits">12</span>
          
          <code class="ruby">    setupf=1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="594">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="595">
          <span class="hits">26</span>
          
          <code class="ruby">  ! function_exists &#39;teardown_test&#39; || {</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="596">
          <span class="hits">18</span>
          
          <code class="ruby">    teardownf=1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="597">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="covered" data-hits="37" data-linenumber="598">
          <span class="hits">37</span>
          
          <code class="ruby">  for test_func in &quot;${_testfuncs[@]}&quot;; do</code>
        </li>
      
        <li class="covered" data-hits="75" data-linenumber="599">
          <span class="hits">75</span>
          
          <code class="ruby">    if [[ $_failed_count &gt; 0 &amp;&amp; $FAIL_FAST || ${_testskip[$test_func]} ]]; then</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="600">
          <span class="hits">5</span>
          
          <code class="ruby">      display_test_skipped &quot;${_testdescs[$test_func]}&quot;</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="601">
          <span class="hits">5</span>
          
          <code class="ruby">      ((++_skipped_count))</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="602">
          <span class="hits">5</span>
          
          <code class="ruby">      continue</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="603">
          
          
          <code class="ruby">    fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="604">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="605">
          <span class="hits">32</span>
          
          <code class="ruby">    _CURRENT_TEST_NAME=${_testdescs[$test_func]}</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="606">
          <span class="hits">32</span>
          
          <code class="ruby">    [[ ! $ANIMATE ]] || {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="607">
          
          
          <code class="ruby">      add_spinner 0 &quot;${#_INDENT}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="608">
          
          
          <code class="ruby">      create_spinners</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="609">
          
          
          <code class="ruby">      printf &quot;%.${COLUMNS}s&quot; &quot;${_INDENT}* ${_CURRENT_TEST_NAME}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="610">
          
          
          <code class="ruby">    } &gt;&amp;3</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="611">
          <span class="hits">32</span>
          
          <code class="ruby">    _setup_passed=1</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="612">
          <span class="hits">64</span>
          
          <code class="ruby">    try:</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="613">
          <span class="hits">32</span>
          
          <code class="ruby">      log_info &quot;Start test: $_CURRENT_TEST_NAME&quot;</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="614">
          <span class="hits">32</span>
          
          <code class="ruby">      start_timeout &quot;$test_func&quot;</code>
        </li>
      
        <li class="covered" data-hits="86" data-linenumber="615">
          <span class="hits">86</span>
          
          <code class="ruby">      [[ ! $setupf ]] || { _TRY_VARS=; _setup_passed=0; setup_test; _setup_passed=1; }</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="616">
          <span class="hits">30</span>
          
          <code class="ruby">      &quot;$test_func&quot;</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="617">
          <span class="hits">32</span>
          
          <code class="ruby">    catch:</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="618">
          <span class="hits">15</span>
          
          <code class="ruby">      print_exception</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="619">
          <span class="hits">33</span>
          
          <code class="ruby">      [[ ! $teardownf ]] || _TRY_VARS= call_teardown &#39;teardown_test&#39;</code>
        </li>
      
        <li class="covered" data-hits="49" data-linenumber="620">
          <span class="hits">49</span>
          
          <code class="ruby">    success:</code>
        </li>
      
        <li class="covered" data-hits="39" data-linenumber="621">
          <span class="hits">39</span>
          
          <code class="ruby">      [[ ! $teardownf ]] || _TRY_VARS= call_teardown &#39;teardown_test&#39;</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="622">
          <span class="hits">32</span>
          
          <code class="ruby">    endtry</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="623">
          <span class="hits">32</span>
          
          <code class="ruby">    [[ ! $ANIMATE ]] || {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="624">
          
          
          <code class="ruby">      kill_spinner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="625">
          
          
          <code class="ruby">      _spinners=(&quot;${_spinners[@]:0:${#_spinners[@]}-1}&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="626">
          
          
          <code class="ruby">      (( _lines_out != LINES-1 )) || {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="627">
          
          
          <code class="ruby">        tput cuu &quot;$_lines_out&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="628">
          
          
          <code class="ruby">        failed || ((_failed_count+_error_count &gt; 0)) &amp;&amp; echo -ne &quot;\r${_RED}*${_NC}&quot; || echo -ne &#39;\r*&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="629">
          
          
          <code class="ruby">        tput cud &quot;$_lines_out&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="630">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="631">
          
          
          <code class="ruby">      echo -ne &#39;\r&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="632">
          
          
          <code class="ruby">    } &gt;&amp;3</code>
        </li>
      
        <li class="covered" data-hits="32" data-linenumber="633">
          <span class="hits">32</span>
          
          <code class="ruby">    if failed; then</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="634">
          <span class="hits">15</span>
          
          <code class="ruby">      display_test_failed</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="635">
          <span class="hits">30</span>
          
          <code class="ruby">      (( _setup_passed )) &amp;&amp; ((++_failed_count)) || ((++_error_count))</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="636">
          <span class="hits">30</span>
          
          <code class="ruby">      ((_failed_count+_error_count != 1)) || [[ ! $ANIMATE ]] || display_test_script_outcome 1 1 &gt;&amp;3</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="637">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="638">
          <span class="hits">17</span>
          
          <code class="ruby">      display_test_passed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="639">
          
          
          <code class="ruby">    fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="640">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="641">
          <span class="hits">26</span>
          
          <code class="ruby">  ! function_exists &#39;teardown_test_suite&#39; || {</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="642">
          <span class="hits">18</span>
          
          <code class="ruby">    [[ ! $ANIMATE ]] || create_spinners &gt;&amp;3</code>
        </li>
      
        <li class="covered" data-hits="36" data-linenumber="643">
          <span class="hits">36</span>
          
          <code class="ruby">    _TRY_VARS= call_teardown &#39;teardown_test_suite&#39;</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="644">
          <span class="hits">18</span>
          
          <code class="ruby">    [[ ! $ANIMATE ]] || kill_spinner</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="645">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="646">
          <span class="hits">26</span>
          
          <code class="ruby">  if (( _failed_count+_error_count &gt; 0 )); then</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="647">
          <span class="hits">15</span>
          
          <code class="ruby">    log_err &quot;$_failed_count test(s) failed&quot;</code>
        </li>
      
        <li class="covered" data-hits="30" data-linenumber="648">
          <span class="hits">30</span>
          
          <code class="ruby">    [[ $_TESTS_RUNNER ]] || exit 1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="649">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="650">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="651">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="652">
          
          
          <code class="ruby">load_includes() {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="653">
          
          
          <code class="ruby">  load_include_file() {</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="654">
          <span class="hits">12</span>
          
          <code class="ruby">    local include_file=$1</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="655">
          <span class="hits">12</span>
          
          <code class="ruby">    source &quot;$include_file&quot;</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="656">
          <span class="hits">12</span>
          
          <code class="ruby">    log_info &quot;Included: $include_file&quot;</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="657">
          <span class="hits">24</span>
          
          <code class="ruby">    [[ ! $INITIALIZE_SOURCE_CACHE ]] || prune_path &quot;$include_file&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="658">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="659">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="660">
          
          
          <code class="ruby">  _load_includes() {</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="661">
          <span class="hits">168</span>
          
          <code class="ruby">    local include_files=() path file</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="662">
          <span class="hits">168</span>
          
          <code class="ruby">    for path in $INCLUDE_PATH; do</code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="663">
          <span class="hits">168</span>
          
          <code class="ruby">      for file in &quot;$path&quot;; do</code>
        </li>
      
        <li class="covered" data-hits="180" data-linenumber="664">
          <span class="hits">180</span>
          
          <code class="ruby">        [[ -f $file ]] &amp;&amp; include_files=(&quot;${include_files[@]/$file}&quot; &quot;$file&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="665">
          
          
          <code class="ruby">      done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="666">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="667">
          <span class="hits">12</span>
          
          <code class="ruby">    for file in &quot;${include_files[@]}&quot;; do</code>
        </li>
      
        <li class="covered" data-hits="24" data-linenumber="668">
          <span class="hits">24</span>
          
          <code class="ruby">      [[ $file ]] &amp;&amp; load_include_file &quot;$file&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="669">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="670">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="671">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="168" data-linenumber="672">
          <span class="hits">168</span>
          
          <code class="ruby">  IFS=&quot;:&quot; _load_includes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="673">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="674">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="675">
          
          
          <code class="ruby">assert_msg() {</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="676">
          <span class="hits">14</span>
          
          <code class="ruby">  local msg=$1 why=$2</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="677">
          <span class="hits">14</span>
          
          <code class="ruby">  _assert_msg=&quot;Assertion failed: ${msg:+$msg, }$why&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="678">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="679">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="680">
          
          
          <code class="ruby">throw_assert() {</code>
        </li>
      
        <li class="covered" data-hits="14" data-linenumber="681">
          <span class="hits">14</span>
          
          <code class="ruby">  assert_msg &quot;$1&quot; &quot;$2&quot;</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="682">
          <span class="hits">28</span>
          
          <code class="ruby">  first_frame=3 throw &#39;assert&#39; &quot;$_assert_msg&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="683">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="684">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="685">
          
          
          <code class="ruby">assert_success() {</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="686">
          <span class="hits">19</span>
          
          <code class="ruby">  check_pending_exceptions</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="687">
          <span class="hits">19</span>
          
          <code class="ruby">  local what=$1</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="688">
          <span class="hits">19</span>
          
          <code class="ruby">  local msg=$2</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="689">
          <span class="hits">38</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="690">
          <span class="hits">19</span>
          
          <code class="ruby">    _eval &quot;$what&quot;</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="691">
          <span class="hits">19</span>
          
          <code class="ruby">  catch nonzero:</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="692">
          <span class="hits">9</span>
          
          <code class="ruby">    local why=&quot;expected success but got failure in: &#39;$what&#39;&quot;</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="693">
          <span class="hits">18</span>
          
          <code class="ruby">    with_cause: throw_assert &quot;$msg&quot; &quot;$why&quot;</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="694">
          <span class="hits">9</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="695">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="696">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="697">
          
          
          <code class="ruby">assert_failure() {</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="698">
          <span class="hits">19</span>
          
          <code class="ruby">  check_pending_exceptions</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="699">
          <span class="hits">19</span>
          
          <code class="ruby">  local what=$1</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="700">
          <span class="hits">19</span>
          
          <code class="ruby">  local msg=$2</code>
        </li>
      
        <li class="covered" data-hits="38" data-linenumber="701">
          <span class="hits">38</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="702">
          <span class="hits">19</span>
          
          <code class="ruby">    _eval &quot;$what&quot;</code>
        </li>
      
        <li class="covered" data-hits="19" data-linenumber="703">
          <span class="hits">19</span>
          
          <code class="ruby">  catch nonzero:</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="704">
          <span class="hits">16</span>
          
          <code class="ruby">    log_info &quot;Expected failure:&quot;</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="705">
          <span class="hits">16</span>
          
          <code class="ruby">    print_exception log_info</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="706">
          <span class="hits">20</span>
          
          <code class="ruby">  success:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="707">
          <span class="hits">2</span>
          
          <code class="ruby">    local why=&quot;expected failure but got success in: &#39;$what&#39;&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="708">
          <span class="hits">2</span>
          
          <code class="ruby">    throw_assert &quot;$msg&quot; &quot;$why&quot;</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="709">
          <span class="hits">16</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="710">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="711">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="712">
          
          
          <code class="ruby">assert_equals() {</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="713">
          <span class="hits">28</span>
          
          <code class="ruby">  check_pending_exceptions</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="714">
          <span class="hits">26</span>
          
          <code class="ruby">  local expected=$1</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="715">
          <span class="hits">26</span>
          
          <code class="ruby">  local current=$2</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="716">
          <span class="hits">26</span>
          
          <code class="ruby">  local msg=$3</code>
        </li>
      
        <li class="covered" data-hits="26" data-linenumber="717">
          <span class="hits">26</span>
          
          <code class="ruby">  [[ &quot;$expected&quot; = &quot;$current&quot; ]] || {</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="718">
          <span class="hits">3</span>
          
          <code class="ruby">    local why=&quot;expected &#39;$expected&#39; but got &#39;$current&#39;&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="719">
          <span class="hits">3</span>
          
          <code class="ruby">    throw_assert &quot;$msg&quot; &quot;$why&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="720">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="721">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="722">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="723">
          
          
          <code class="ruby">set_color() {</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="724">
          <span class="hits">94</span>
          
          <code class="ruby">  if [[ $COLOR = &#39;yes&#39; ]]; then</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="725">
          <span class="hits">82</span>
          
          <code class="ruby">    _GREEN=&#39;\033[0;32m&#39;</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="726">
          <span class="hits">82</span>
          
          <code class="ruby">    _ORANGE=&#39;\033[0;33m&#39;</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="727">
          <span class="hits">82</span>
          
          <code class="ruby">    _RED=&#39;\033[0;31m&#39;</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="728">
          <span class="hits">82</span>
          
          <code class="ruby">    _BLUE=&#39;\033[0;34m&#39;</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="729">
          <span class="hits">82</span>
          
          <code class="ruby">    _NC=&#39;\033[0m&#39; # No Color&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="730">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="731">
          <span class="hits">12</span>
          
          <code class="ruby">    unset _GREEN _ORANGE _RED _BLUE _NC</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="732">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="733">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="734">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="735">
          
          
          <code class="ruby">cleanup() {</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="736">
          <span class="hits">82</span>
          
          <code class="ruby">  exec 1&gt;&amp;- 2&gt;&amp;- 1&gt;&amp;3 2&gt;&amp;4</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="737">
          <span class="hits">82</span>
          
          <code class="ruby">  wait</code>
        </li>
      
        <li class="covered" data-hits="214" data-linenumber="738">
          <span class="hits">214</span>
          
          <code class="ruby">  [[ ! $CLEAN_TEST_TMP ]] || [[ $_EXIT_CODE != 0 ]] || rm -rf &quot;$TEST_TMP&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="739">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="740">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="741">
          
          
          <code class="ruby">setup_io() {</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="742">
          <span class="hits">81</span>
          
          <code class="ruby">  [[ $SUBTEST_LOG_CONFIG != &#39;noredir&#39; ]] || return 0</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="743">
          <span class="hits">81</span>
          
          <code class="ruby">  local log_dir</code>
        </li>
      
        <li class="covered" data-hits="162" data-linenumber="744">
          <span class="hits">162</span>
          
          <code class="ruby">  log_dir=$(dirname &quot;$LOG_FILE&quot;)</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="745">
          <span class="hits">83</span>
          
          <code class="ruby">  [[ -d $log_dir ]] || xerr mkdir -p &quot;$log_dir&quot;</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="746">
          <span class="hits">81</span>
          
          <code class="ruby">  if [[ $VERBOSE ]]; then</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="747">
          <span class="hits">1</span>
          
          <code class="ruby">    _PIPE=$_TMP_BASE-pipe</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="748">
          <span class="hits">1</span>
          
          <code class="ruby">    mkfifo &quot;$_PIPE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="749">
          <span class="hits">1</span>
          
          <code class="ruby">    local redir=</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="750">
          <span class="hits">1</span>
          
          <code class="ruby">    [[ $LOG_MODE = overwrite ]] || redir=-a</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="751">
          <span class="hits">1</span>
          
          <code class="ruby">    tee $redir &lt;&quot;$_PIPE&quot; &quot;$LOG_FILE&quot; &amp;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="752">
          <span class="hits">1</span>
          
          <code class="ruby">    exec 3&gt;&amp;1 4&gt;&amp;2 &gt;&quot;$_PIPE&quot; 2&gt;&amp;1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="753">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="754">
          <span class="hits">80</span>
          
          <code class="ruby">    _PIPE=</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="755">
          <span class="hits">80</span>
          
          <code class="ruby">    local redir=\&gt;</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="756">
          <span class="hits">81</span>
          
          <code class="ruby">    [[ $LOG_MODE = overwrite ]] || redir=\&gt;$redir</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="757">
          <span class="hits">80</span>
          
          <code class="ruby">    exec 3&gt;&amp;1 4&gt;&amp;2</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="758">
          <span class="hits">80</span>
          
          <code class="ruby">    xerr exec $redir&quot;$LOG_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="80" data-linenumber="759">
          <span class="hits">80</span>
          
          <code class="ruby">    exec 2&gt;&amp;1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="760">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="761">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="762">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="763">
          
          
          <code class="ruby">config_defaults() {</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="764">
          <span class="hits">83</span>
          
          <code class="ruby">  default_VERBOSE=</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="765">
          <span class="hits">83</span>
          
          <code class="ruby">  default_DEBUG=</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="766">
          <span class="hits">83</span>
          
          <code class="ruby">  default_INCLUDE_GLOB=&#39;include*.sh&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="767">
          <span class="hits">83</span>
          
          <code class="ruby">  default_INCLUDE_PATH=&#39;$TESTSH_DIR/$INCLUDE_GLOB:$TEST_SCRIPT_DIR/$INCLUDE_GLOB&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="768">
          <span class="hits">83</span>
          
          <code class="ruby">  default_FAIL_FAST=</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="769">
          <span class="hits">83</span>
          
          <code class="ruby">  default_PRUNE_PATH=&#39;$PWD/&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="770">
          <span class="hits">83</span>
          
          <code class="ruby">  default_STACK_TRACE=&#39;full&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="771">
          <span class="hits">83</span>
          
          <code class="ruby">  default_COLOR=&#39;yes&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="772">
          
          
          <code class="ruby">  # TODO: log would be better</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="773">
          <span class="hits">83</span>
          
          <code class="ruby">  default_LOG_DIR_NAME=&#39;testout&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="774">
          <span class="hits">83</span>
          
          <code class="ruby">  default_LOG_DIR=&#39;$TEST_SCRIPT_DIR/$LOG_DIR_NAME&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="775">
          <span class="hits">83</span>
          
          <code class="ruby">  default_LOG_NAME=&#39;$(basename &quot;$TEST_SCRIPT&quot;).out&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="776">
          <span class="hits">83</span>
          
          <code class="ruby">  default_LOG_FILE=&#39;$LOG_DIR/$LOG_NAME&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="777">
          <span class="hits">83</span>
          
          <code class="ruby">  default_LOG_MODE=&#39;overwrite&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="778">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="779">
          
          
          <code class="ruby">  # undocumented</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="780">
          <span class="hits">83</span>
          
          <code class="ruby">  default_SUBTEST_LOG_CONFIG=&#39;reset&#39;</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="781">
          <span class="hits">83</span>
          
          <code class="ruby">  default_INITIALIZE_SOURCE_CACHE=1</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="782">
          <span class="hits">83</span>
          
          <code class="ruby">  default_CLEAN_TEST_TMP=1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="783">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="784">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="785">
          
          
          <code class="ruby">load_config() {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="786">
          
          
          <code class="ruby">  save_variable() {</code>
        </li>
      
        <li class="covered" data-hits="1615" data-linenumber="787">
          <span class="hits">1615</span>
          
          <code class="ruby">    local var=$1</code>
        </li>
      
        <li class="covered" data-hits="2191" data-linenumber="788">
          <span class="hits">2191</span>
          
          <code class="ruby">    [[ ! -v $var ]] || eval &quot;saved_$var=${!var@Q}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="789">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="790">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="791">
          
          
          <code class="ruby">  restore_variable() {</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="792">
          <span class="hits">1598</span>
          
          <code class="ruby">    local var=$1</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="793">
          <span class="hits">1598</span>
          
          <code class="ruby">    local saved_var=saved_$var</code>
        </li>
      
        <li class="covered" data-hits="2140" data-linenumber="794">
          <span class="hits">2140</span>
          
          <code class="ruby">    [[ ! -v $saved_var ]] || eval &quot;$var=${!saved_var@Q}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="795">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="796">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="797">
          
          
          <code class="ruby">  set_default() {</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="798">
          <span class="hits">1598</span>
          
          <code class="ruby">    local var=$1</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="799">
          <span class="hits">1598</span>
          
          <code class="ruby">    local default_var=default_$var</code>
        </li>
      
        <li class="covered" data-hits="4234" data-linenumber="800">
          <span class="hits">4234</span>
          
          <code class="ruby">    [[ -v $var ]] || eval &quot;$var=\$$default_var&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="801">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="802">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="803">
          
          
          <code class="ruby">  eval_var() {</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="804">
          <span class="hits">1598</span>
          
          <code class="ruby">    local var=$1</code>
        </li>
      
        <li class="covered" data-hits="3278" data-linenumber="805">
          <span class="hits">3278</span>
          
          <code class="ruby">    eval &quot;$var=${!var}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="806">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="807">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="808">
          
          
          <code class="ruby">  load_config_file() {</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="809">
          <span class="hits">5</span>
          
          <code class="ruby">    local config_file=$1</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="810">
          <span class="hits">5</span>
          
          <code class="ruby">    source &quot;$config_file&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="811">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="812">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="813">
          
          
          <code class="ruby">  try_config_path() {</code>
        </li>
      
        <li class="covered" data-hits="91" data-linenumber="814">
          <span class="hits">91</span>
          
          <code class="ruby">    CONFIG_PATH=&quot;$TEST_SCRIPT_DIR:$TESTSH_DIR:$PWD&quot;</code>
        </li>
      
        <li class="covered" data-hits="269" data-linenumber="815">
          <span class="hits">269</span>
          
          <code class="ruby">    for path in $CONFIG_PATH; do</code>
        </li>
      
        <li class="covered" data-hits="269" data-linenumber="816">
          <span class="hits">269</span>
          
          <code class="ruby">      if [[ -f $path/test.sh.config ]]; then</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="817">
          <span class="hits">2</span>
          
          <code class="ruby">        CONFIG_FILE=$path/test.sh.config</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="818">
          <span class="hits">2</span>
          
          <code class="ruby">        load_config_file &quot;$CONFIG_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="819">
          <span class="hits">2</span>
          
          <code class="ruby">        break</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="820">
          
          
          <code class="ruby">      fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="821">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="822">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="823">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="824">
          
          
          <code class="ruby">  # TODO: distinguish between normal and post-evaluated variables</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="825">
          <span class="hits">94</span>
          
          <code class="ruby">  local config_vars=&quot;VERBOSE DEBUG INCLUDE_GLOB INCLUDE_PATH FAIL_FAST PRUNE_PATH STACK_TRACE COLOR LOG_DIR_NAME LOG_DIR LOG_NAME LOG_FILE LOG_MODE SUBTEST_LOG_CONFIG INITIALIZE_SOURCE_CACHE CLEAN_TEST_TMP ANIMATE&quot;</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="826">
          <span class="hits">94</span>
          
          <code class="ruby">  local var</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="827">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="828">
          
          
          <code class="ruby">  # save environment config</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="829">
          <span class="hits">1598</span>
          
          <code class="ruby">  for var in $config_vars; do</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="830">
          <span class="hits">1598</span>
          
          <code class="ruby">    save_variable &quot;$var&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="831">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="832">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="833">
          
          
          <code class="ruby">  # load config file if present</code>
        </li>
      
        <li class="covered" data-hits="276" data-linenumber="834">
          <span class="hits">276</span>
          
          <code class="ruby">  [ -z &quot;$CONFIG_FILE&quot; ] &amp;&amp; IFS=&#39;:&#39; try_config_path || {</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="835">
          <span class="hits">3</span>
          
          <code class="ruby">    [[ -f $CONFIG_FILE ]] || throw &#39;configuration&#39; &quot;Configuration file not fond: $CONFIG_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="836">
          <span class="hits">3</span>
          
          <code class="ruby">    load_config_file &quot;$CONFIG_FILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="837">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="838">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="839">
          
          
          <code class="ruby">  # prioritize environment config</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="840">
          <span class="hits">1598</span>
          
          <code class="ruby">  for var in $config_vars; do</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="841">
          <span class="hits">1598</span>
          
          <code class="ruby">    restore_variable &quot;$var&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="842">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="843">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="844">
          
          
          <code class="ruby">  # set defaults</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="845">
          <span class="hits">1598</span>
          
          <code class="ruby">  for var in $config_vars; do</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="846">
          <span class="hits">1598</span>
          
          <code class="ruby">    set_default &quot;$var&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="847">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="848">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="849">
          <span class="hits">94</span>
          
          <code class="ruby">  if [[ $_TESTS_RUNNER ]]; then</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="850">
          <span class="hits">17</span>
          
          <code class="ruby">    for var in $config_vars; do</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="851">
          <span class="hits">17</span>
          
          <code class="ruby">      save_variable &quot;$var&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="852">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="853">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="854">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="855">
          
          
          <code class="ruby">  # evaluate vars</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="856">
          <span class="hits">1598</span>
          
          <code class="ruby">  for var in $config_vars; do</code>
        </li>
      
        <li class="covered" data-hits="1598" data-linenumber="857">
          <span class="hits">1598</span>
          
          <code class="ruby">    eval_var &quot;$var&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="858">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="859">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="860">
          <span class="hits">94</span>
          
          <code class="ruby">  set_color</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="861">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="862">
          
          
          <code class="ruby">  # validate config</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="863">
          
          
          <code class="ruby">  validate_value() {</code>
        </li>
      
        <li class="covered" data-hits="370" data-linenumber="864">
          <span class="hits">370</span>
          
          <code class="ruby">    local var=$1</code>
        </li>
      
        <li class="covered" data-hits="370" data-linenumber="865">
          <span class="hits">370</span>
          
          <code class="ruby">    local val=${!var}</code>
        </li>
      
        <li class="covered" data-hits="370" data-linenumber="866">
          <span class="hits">370</span>
          
          <code class="ruby">    shift</code>
        </li>
      
        <li class="covered" data-hits="521" data-linenumber="867">
          <span class="hits">521</span>
          
          <code class="ruby">    for i in &quot;$@&quot;; do</code>
        </li>
      
        <li class="covered" data-hits="889" data-linenumber="868">
          <span class="hits">889</span>
          
          <code class="ruby">      [[ $i != &quot;$val&quot; ]] || return 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="869">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="870">
          <span class="hits">2</span>
          
          <code class="ruby">    local allowed_values=&quot;$*&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="871">
          <span class="hits">2</span>
          
          <code class="ruby">    throw &#39;configuration&#39; &quot;invalid value of variable $var: &#39;$val&#39;, allowed values: ${allowed_values// /, }&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="872">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="873">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="874">
          
          
          <code class="ruby">  # TODO: change to: no, yes... mmm what about the other booleans... not clear</code>
        </li>
      
        <li class="covered" data-hits="94" data-linenumber="875">
          <span class="hits">94</span>
          
          <code class="ruby">  validate_value STACK_TRACE no full</code>
        </li>
      
        <li class="covered" data-hits="92" data-linenumber="876">
          <span class="hits">92</span>
          
          <code class="ruby">  validate_value COLOR no yes</code>
        </li>
      
        <li class="covered" data-hits="92" data-linenumber="877">
          <span class="hits">92</span>
          
          <code class="ruby">  validate_value LOG_MODE overwrite append</code>
        </li>
      
        <li class="covered" data-hits="92" data-linenumber="878">
          <span class="hits">92</span>
          
          <code class="ruby">  validate_value SUBTEST_LOG_CONFIG reset noreset noredir</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="879">
          <span class="hits">100</span>
          
          <code class="ruby">  [[ ! $VERBOSE ]] || ANIMATE=</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="880">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="881">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="882">
          
          
          <code class="ruby">init_prune_path_cache() {</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="883">
          <span class="hits">82</span>
          
          <code class="ruby">  local pa  th</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="884">
          <span class="hits">83</span>
          
          <code class="ruby">  [[ ! -v _SUBTEST ]] || for path in &quot;${!_PRUNE_PATH_CACHE[@]}&quot;; do</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="885">
          <span class="hits">1</span>
          
          <code class="ruby">    _PRUNE_PATH_CACHE[$path]=${path##$PRUNE_PATH}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="886">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="887">
          <span class="hits">83</span>
          
          <code class="ruby">  [[ $INITIALIZE_SOURCE_CACHE ]] || return 0</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="888">
          <span class="hits">81</span>
          
          <code class="ruby">  prune_path &quot;$TEST_SCRIPT&quot;</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="889">
          <span class="hits">81</span>
          
          <code class="ruby">  prune_path &quot;$BASH_SOURCE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="890">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="891">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="892">
          
          
          <code class="ruby">main_exit_handler() {</code>
        </li>
      
        <li class="covered" data-hits="103" data-linenumber="893">
          <span class="hits">103</span>
          
          <code class="ruby">  [[ ! -f $_EXCEPTIONS_FILE ]] || unhandled_exception</code>
        </li>
      
        <li class="covered" data-hits="84" data-linenumber="894">
          <span class="hits">84</span>
          
          <code class="ruby">  [[ -z $_PIPE ]] || rm -f &quot;$_PIPE&quot;</code>
        </li>
      
        <li class="covered" data-hits="95" data-linenumber="895">
          <span class="hits">95</span>
          
          <code class="ruby">  [[ ! -f $_TRY_VARS_FILE ]] || rm -f &quot;$_TRY_VARS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="163" data-linenumber="896">
          <span class="hits">163</span>
          
          <code class="ruby">  [[ ! -f $_ERR_FILE ]] || rm -f &quot;$_ERR_FILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="897">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="898">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="899">
          
          
          <code class="ruby">inline_exit_handler() {</code>
        </li>
      
        <li class="covered" data-hits="77" data-linenumber="900">
          <span class="hits">77</span>
          
          <code class="ruby">  [[ ! -v _CURRENT_TEST_NAME ]] || display_last_inline_test_result</code>
        </li>
      
        <li class="covered" data-hits="78" data-linenumber="901">
          <span class="hits">78</span>
          
          <code class="ruby">  [[ -n $_teardown_test_called ]] || call_teardown_if_exists &#39;teardown_test&#39;</code>
        </li>
      
        <li class="covered" data-hits="77" data-linenumber="902">
          <span class="hits">77</span>
          
          <code class="ruby">  [[ -z $_setup_test_suite_called ]] || call_teardown_if_exists &#39;teardown_test_suite&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="903">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="904">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="905">
          
          
          <code class="ruby">self_runner_exit_handler() {</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="906">
          <span class="hits">82</span>
          
          <code class="ruby">  main_exit_handler</code>
        </li>
      
        <li class="covered" data-hits="160" data-linenumber="907">
          <span class="hits">160</span>
          
          <code class="ruby">  [[ $_FIRST_TEST ]] || [[ -v _MANAGED ]] || inline_exit_handler</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="908">
          <span class="hits">82</span>
          
          <code class="ruby">  cleanup</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="909">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="910">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="911">
          
          
          <code class="ruby">setup_self_runner() {</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="912">
          <span class="hits">164</span>
          
          <code class="ruby">  TEST_SCRIPT=$(readlink -f &quot;$0&quot;)</code>
        </li>
      
        <li class="covered" data-hits="164" data-linenumber="913">
          <span class="hits">164</span>
          
          <code class="ruby">  TEST_SCRIPT_DIR=$(dirname &quot;$TEST_SCRIPT&quot;)</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="914">
          <span class="hits">82</span>
          
          <code class="ruby">  TEST_TMP=$TEST_SCRIPT_DIR&#39;/tmp&#39;</code>
        </li>
      
        <li class="covered" data-hits="128" data-linenumber="915">
          <span class="hits">128</span>
          
          <code class="ruby">  [[ -d $TEST_TMP ]] || rm -rf &quot;$TEST_TMP&quot;</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="916">
          <span class="hits">82</span>
          
          <code class="ruby">  mkdir -p &quot;$TEST_TMP&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="917">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="918">
          <span class="hits">82</span>
          
          <code class="ruby">  push_exit_handler &#39;self_runner_exit_handler&#39;</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="919">
          <span class="hits">82</span>
          
          <code class="ruby">  trap &#39;err_trap&#39; ERR</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="920">
          <span class="hits">82</span>
          
          <code class="ruby">  push_err_handler &#39;create_implicit_exception $_ERR_CODE&#39;</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="921">
          <span class="hits">82</span>
          
          <code class="ruby">  config_defaults</code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="922">
          <span class="hits">82</span>
          
          <code class="ruby">  load_config</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="923">
          <span class="hits">81</span>
          
          <code class="ruby">  setup_io</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="924">
          <span class="hits">81</span>
          
          <code class="ruby">  [[ -z $CONFIG_FILE ]] || log_info &quot;Configuration: $CONFIG_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="925">
          <span class="hits">81</span>
          
          <code class="ruby">  init_prune_path_cache</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="926">
          <span class="hits">81</span>
          
          <code class="ruby">  load_includes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="927">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="928">
          <span class="hits">81</span>
          
          <code class="ruby">  _FIRST_TEST=1</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="929">
          <span class="hits">81</span>
          
          <code class="ruby">  [[ ! $DEBUG ]] || set -x</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="930">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="931">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="932">
          
          
          <code class="ruby">tests_runner_exit_handler() {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="933">
          <span class="hits">1</span>
          
          <code class="ruby">  [[ ! $ANIMATE ]] || {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="934">
          
          
          <code class="ruby">    tput cnorm</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="935">
          
          
          <code class="ruby">    stty echo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="936">
          
          
          <code class="ruby">  }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="937">
          <span class="hits">1</span>
          
          <code class="ruby">  check_exit_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="938">
          <span class="hits">1</span>
          
          <code class="ruby">  main_exit_handler</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="939">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="940">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="941">
          
          
          <code class="ruby">setup_runner() {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="942">
          <span class="hits">1</span>
          
          <code class="ruby">  push_exit_handler &#39;tests_runner_exit_handler&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="943">
          <span class="hits">1</span>
          
          <code class="ruby">  trap &#39;err_trap&#39; ERR</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="944">
          <span class="hits">1</span>
          
          <code class="ruby">  push_err_handler &#39;create_implicit_exception $_ERR_CODE&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="945">
          <span class="hits">1</span>
          
          <code class="ruby">  config_defaults</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="946">
          <span class="hits">1</span>
          
          <code class="ruby">  load_config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="947">
          <span class="hits">1</span>
          
          <code class="ruby">  [[ -z $CONFIG_FILE ]] || echo &quot;Configuration: $CONFIG_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="948">
          <span class="hits">1</span>
          
          <code class="ruby">  prune_path &quot;$BASH_SOURCE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="949">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="950">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="951">
          
          
          <code class="ruby">setup_test_script() {</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="952">
          
          
          <code class="ruby">  TEST_SCRIPT=$(readlink -f &quot;$test_script&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="953">
          
          
          <code class="ruby">  TEST_SCRIPT_DIR=$(dirname &quot;$TEST_SCRIPT&quot;)</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="954">
          
          
          <code class="ruby">  TEST_TMP=$TEST_SCRIPT_DIR&#39;/tmp&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="955">
          
          
          <code class="ruby">  [[ -d $TEST_TMP ]] || rm -rf &quot;$TEST_TMP&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="956">
          
          
          <code class="ruby">  mkdir -p &quot;$TEST_TMP&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="957">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="958">
          
          
          <code class="ruby">  for var in INCLUDE_GLOB INCLUDE_PATH PRUNE_PATH LOG_DIR_NAME LOG_DIR LOG_NAME LOG_FILE; do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="959">
          
          
          <code class="ruby">    restore_variable &quot;$var&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="960">
          
          
          <code class="ruby">    eval_var &quot;$var&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="961">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="962">
          
          
          <code class="ruby">  setup_io</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="963">
          
          
          <code class="ruby">  push_exit_handler &#39;[[ -z $_PIPE ]] || rm -f &quot;$_PIPE&quot;; cleanup&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="964">
          
          
          <code class="ruby">  prune_path &quot;$TEST_SCRIPT&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="965">
          
          
          <code class="ruby">  load_includes</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="966">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="967">
          
          
          <code class="ruby">  [[ ! $DEBUG ]] || set -x</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="968">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="969">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="166" data-linenumber="970">
          <span class="hits">166</span>
          
          <code class="ruby">TESTSH=$(readlink -f &quot;$BASH_SOURCE&quot;)</code>
        </li>
      
        <li class="covered" data-hits="166" data-linenumber="971">
          <span class="hits">166</span>
          
          <code class="ruby">TESTSH_DIR=$(dirname &quot;$TESTSH&quot;)</code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="972">
          <span class="hits">83</span>
          
          <code class="ruby">VERSION=&#39;0.1.0-SNAPSHOT-9f8e143&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="973">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="974">
          
          
          <code class="ruby">runner() {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="975">
          <span class="hits">1</span>
          
          <code class="ruby">  setup_tty</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="976">
          <span class="hits">1</span>
          
          <code class="ruby">  print_banner</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="977">
          <span class="hits">1</span>
          
          <code class="ruby">  echo &quot;This is test.sh version 0.1.0-SNAPSHOT-9f8e143&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="978">
          <span class="hits">2</span>
          
          <code class="ruby">  echo &quot;Build date: $(date -d @1583363189)&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="979">
          <span class="hits">1</span>
          
          <code class="ruby">  echo &quot;See https://github.com/pikatoste/test.sh&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="980">
          <span class="hits">1</span>
          
          <code class="ruby">  echo</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="981">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="982">
          <span class="hits">1</span>
          
          <code class="ruby">  alias &#39;@run_tests=&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="983">
          <span class="hits">1</span>
          
          <code class="ruby">  _TESTS_RUNNER=1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="984">
          <span class="hits">1</span>
          
          <code class="ruby">  _INDENT=&#39;  &#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="985">
          <span class="hits">1</span>
          
          <code class="ruby">  save_ANIMATE=$ANIMATE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="986">
          <span class="hits">1</span>
          
          <code class="ruby">  setup_runner</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="987">
          <span class="hits">1</span>
          
          <code class="ruby">  [[ $save_ANIMATE == $ANIMATE ]] || { stty echo; tput cnorm; }</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="988">
          <span class="hits">1</span>
          
          <code class="ruby">  declare &#39;script_failures_accum=0&#39; &#39;script_errors_accum=0&#39; &#39;test_count_accum=0&#39; &#39;failures_accum=0&#39; &#39;errors_accum=0&#39; \</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="989">
          <span class="hits">1</span>
          
          <code class="ruby">    &#39;skipped_accum=0&#39; &#39;script_failed&#39; &#39;real_time&#39; &#39;test_script&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="990">
          <span class="hits">1</span>
          
          <code class="ruby">  _TRY_VARS=&#39;_script_error _test_count _failed_count _skipped_count _error_count _lines_out&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="991">
          
          
          <code class="ruby">  { time {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="992">
          
          
          <code class="ruby">    for test_script in &quot;$@&quot;; do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="993">
          
          
          <code class="ruby">      declare -g &#39;_script_error=0&#39; &#39;_test_count=0&#39; &#39;_failed_count=0&#39; &#39;_skipped_count=0&#39; &#39;_error_count=0&#39; &#39;_lines_out=1&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="994">
          
          
          <code class="ruby">      printf &quot;%${COLUMNS:+.$COLUMNS}s\n&quot; &quot;* $test_script:&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="995">
          
          
          <code class="ruby">      try:</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="996">
          
          
          <code class="ruby">        setup_test_script</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="997">
          
          
          <code class="ruby">        try:</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="998">
          
          
          <code class="ruby">          _XERR_PRINT=1 xerr source &quot;$TEST_SCRIPT&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="999">
          
          
          <code class="ruby">          _test_count=${#_testfuncs[@]}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1000">
          
          
          <code class="ruby">          _TRY_VARS= run_tests</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1001">
          
          
          <code class="ruby">        catch:</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1002">
          
          
          <code class="ruby">          print_exception</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1003">
          
          
          <code class="ruby">          _error_count=$((_test_count-_failed_count-_skipped_count))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1004">
          
          
          <code class="ruby">          _script_error=1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1005">
          
          
          <code class="ruby">        endtry</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1006">
          
          
          <code class="ruby">      catch:</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1007">
          
          
          <code class="ruby">        [[ ! $ANIMATE ]] || display_test_script_outcome 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1008">
          
          
          <code class="ruby">        print_exception log_lines</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1009">
          
          
          <code class="ruby">        _script_error=1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1010">
          
          
          <code class="ruby">        script_failed=1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1011">
          
          
          <code class="ruby">      success:</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1012">
          
          
          <code class="ruby">        script_failed=$(( _failed_count+_error_count+_script_error &gt; 0 ))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1013">
          
          
          <code class="ruby">#        [[ ! $ANIMATE ]] || (( _script_error == 0 &amp;&amp; (_failed_count+_error_count &gt; 0) )) || display_test_script_outcome &quot;$script_failed&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1014">
          
          
          <code class="ruby">        [[ ! $ANIMATE ]] || display_test_script_outcome &quot;$script_failed&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1015">
          
          
          <code class="ruby">      endtry</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1016">
          
          
          <code class="ruby">      let script_failures_accum+=&#39;_script_error==0 &amp;&amp; script_failed&#39; \</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1017">
          
          
          <code class="ruby">          script_errors_accum+=_script_error \</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1018">
          
          
          <code class="ruby">          test_count_accum+=_test_count \</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1019">
          
          
          <code class="ruby">          failures_accum+=_failed_count \</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1020">
          
          
          <code class="ruby">          skipped_accum+=_skipped_count \</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1021">
          
          
          <code class="ruby">          errors_accum+=_error_count \</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1022">
          
          
          <code class="ruby">          1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1023">
          
          
          <code class="ruby">    done</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1024">
          
          
          <code class="ruby">  } 2&gt;&amp;3</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1025">
          
          
          <code class="ruby">  } 3&gt;&amp;2 2&gt;&quot;$_TRY_VARS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1026">
          <span class="hits">1</span>
          
          <code class="ruby">  readarray -t -s 1 -n 1 &#39;real_time&#39; &lt;&quot;$_TRY_VARS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1027">
          <span class="hits">1</span>
          
          <code class="ruby">  printf &quot;%d test scripts: %d passed, %d failed, %d errors\n&quot; &quot;$#&quot; &quot;$(($#-script_failures_accum-script_errors_accum))&quot; &quot;$script_failures_accum&quot; &quot;$script_errors_accum&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1028">
          <span class="hits">1</span>
          
          <code class="ruby">  printf &quot;%d tests: %d passed, %d failed, %d errors, %d skipped\n&quot; &quot;$test_count_accum&quot; &quot;$((test_count_accum-failures_accum-errors_accum-skipped_accum))&quot; &quot;$failures_accum&quot; &quot;$errors_accum&quot; &quot;$skipped_accum&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1029">
          <span class="hits">1</span>
          
          <code class="ruby">  printf &quot;took %s\n&quot; &quot;${real_time##*[[:space:]]}&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1030">
          <span class="hits">1</span>
          
          <code class="ruby">  exit $(( (script_failures_accum+script_errors_accum) &gt; 0 ))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1031">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1032">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1033">
          
          
          <code class="ruby">display_test_script_outcome() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1034">
          
          
          <code class="ruby">  if (( _lines_out &lt; LINES )); then</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1035">
          
          
          <code class="ruby">    local outcome=$1 color</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1036">
          
          
          <code class="ruby">    tput cuu &quot;$_lines_out&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1037">
          
          
          <code class="ruby">    (( outcome == 0 )) &amp;&amp; color=$_GREEN || color=$_RED</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1038">
          
          
          <code class="ruby">    printf &quot;${color}%${COLUMNS:+.$COLUMNS}s${_NC}\r&quot; &quot;* $test_script:&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1039">
          
          
          <code class="ruby">    tput cud &quot;$_lines_out&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1040">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1041">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1042">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1043">
          
          
          <code class="ruby">log_lines() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1044">
          
          
          <code class="ruby">  log_err &quot;$@&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1045">
          
          
          <code class="ruby">  ((++_lines_out))</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1046">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1047">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1048">
          
          
          <code class="ruby">print_banner() {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1049">
          <span class="hits">1</span>
          
          <code class="ruby">  local BANNER=&quot;                                                                </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1050">
          <span class="hits">1</span>
          
          <code class="ruby">   _/                            _/                    _/       </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1051">
          <span class="hits">1</span>
          
          <code class="ruby">_/_/_/_/    _/_/      _/_/_/  _/_/_/_/        _/_/_/  _/_/_/    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1052">
          <span class="hits">1</span>
          
          <code class="ruby"> _/      _/_/_/_/  _/_/        _/          _/_/      _/    _/   </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1053">
          <span class="hits">1</span>
          
          <code class="ruby">_/      _/            _/_/    _/              _/_/  _/    _/    </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1054">
          <span class="hits">1</span>
          
          <code class="ruby"> _/_/    _/_/_/  _/_/_/        _/_/  _/  _/_/_/    _/    _/     </code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1055">
          <span class="hits">1</span>
          
          <code class="ruby">                                                                &quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="1056">
          <span class="hits">3</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="1057">
          <span class="hits">3</span>
          
          <code class="ruby">  [[ $ANIMATE ]] || { echo &quot;$BANNER&quot;; return 0; }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1058">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1059">
          
          
          <code class="ruby">  local ABANNER last i len trim real_time</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1060">
          
          
          <code class="ruby">  readarray -n &quot;$LINES&quot; &#39;ABANNER&#39; &lt;&lt;&lt;&quot;$BANNER&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1061">
          
          
          <code class="ruby">  len=$(( ${#ABANNER} - 1 ))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1062">
          
          
          <code class="ruby">  trim=${ABANNER:0:$len}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1063">
          
          
          <code class="ruby">  trim=${trim//?/?}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1064">
          
          
          <code class="ruby">  printf -v last &quot;%.${len}s&quot; &quot;${ABANNER[-1]}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1065">
          
          
          <code class="ruby">  ABANNER[-1]=$last</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1066">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1067">
          
          
          <code class="ruby">  # calibrate delay</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1068">
          
          
          <code class="ruby">  alias delay=&#39;sleep 0.000&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1069">
          
          
          <code class="ruby">  readarray -t -s 1 -n 1 &#39;real_time&#39; &lt; &lt;(</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1070">
          
          
          <code class="ruby">    { LANG=C</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1071">
          
          
          <code class="ruby">      i=1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1072">
          
          
          <code class="ruby">      time {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1073">
          
          
          <code class="ruby">        ((i)) &amp;&amp; tput cuu $((${#ABANNER[@]} - 1))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1074">
          
          
          <code class="ruby">        trim=${trim:((${#trim}/2))}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1075">
          
          
          <code class="ruby">        printf &quot;%.${COLUMNS}b&quot; &quot;${ABANNER[@]#$trim}&quot; &#39;\r&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1076">
          
          
          <code class="ruby">        eval delay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1077">
          
          
          <code class="ruby">      }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1078">
          
          
          <code class="ruby">    } 2&gt;&amp;1 &gt;/dev/null )</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1079">
          
          
          <code class="ruby">  [[ $real_time =~ .*m(.*)s ]]</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1080">
          
          
          <code class="ruby">  local ms=$((10#${BASH_REMATCH[1]/./}))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1081">
          
          
          <code class="ruby">  local step=15</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1082">
          
          
          <code class="ruby">  if ((ms &gt;= 2*step)); then</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1083">
          
          
          <code class="ruby">    alias delay=</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1084">
          
          
          <code class="ruby">  else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1085">
          
          
          <code class="ruby">    ((ms &gt; step)) &amp;&amp; ms=$step</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1086">
          
          
          <code class="ruby">    ms=$((step-ms))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1087">
          
          
          <code class="ruby">    local s=&#39;0.000&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1088">
          
          
          <code class="ruby">    alias delay=&quot;sleep ${s:0:((${#s}-${#ms}))}$ms&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1089">
          
          
          <code class="ruby">  fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1090">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1091">
          
          
          <code class="ruby">  # animate</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1092">
          
          
          <code class="ruby">  for ((i=0; i&lt;len; i++)); do</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1093">
          
          
          <code class="ruby">    ((i)) &amp;&amp; tput cuu $((${#ABANNER[@]} - 1))</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1094">
          
          
          <code class="ruby">    trim=${trim:1}</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1095">
          
          
          <code class="ruby">    printf &quot;%.${COLUMNS}b&quot; &quot;${ABANNER[@]#$trim}&quot; &#39;\r&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1096">
          
          
          <code class="ruby">    eval delay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1097">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1098">
          
          
          <code class="ruby">  echo</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1099">
          
          
          <code class="ruby">  readarray -s &quot;${#ABANNER[@]}&quot; &#39;ABANNER&#39; &lt;&lt;&lt;&quot;$BANNER&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1100">
          
          
          <code class="ruby">  printf &quot;%.${COLUMNS}s&quot; &quot;${ABANNER[@]}&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1101">
          
          
          <code class="ruby">  unalias delay</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1102">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1103">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1104">
          
          
          <code class="ruby">setup_tty() {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1105">
          <span class="hits">1</span>
          
          <code class="ruby">  default_ANIMATE=1</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1106">
          <span class="hits">2</span>
          
          <code class="ruby">  [ -t 1 ] || default_ANIMATE=</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1107">
          <span class="hits">2</span>
          
          <code class="ruby">  [[ -v &#39;ANIMATE&#39; ]] || ANIMATE=$default_ANIMATE</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1108">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="1109">
          <span class="hits">2</span>
          
          <code class="ruby">  [[ $ANIMATE ]] || return 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1110">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1111">
          
          
          <code class="ruby">  stty -echo</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1112">
          
          
          <code class="ruby">  shopt -s checkwinsize</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="1113">
          
          
          <code class="ruby">  tput civis</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1114">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1115">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="83" data-linenumber="1116">
          <span class="hits">83</span>
          
          <code class="ruby">if [ &quot;$0&quot; = &quot;${BASH_SOURCE}&quot; ]; then</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="1117">
          <span class="hits">1</span>
          
          <code class="ruby">  runner &quot;$@&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1118">
          
          
          <code class="ruby">fi</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="1119">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="82" data-linenumber="1120">
          <span class="hits">82</span>
          
          <code class="ruby">setup_self_runner</code>
        </li>
      
        <li class="covered" data-hits="81" data-linenumber="1121">
          <span class="hits">81</span>
          
          <code class="ruby">alias &#39;@run_tests=run_tests&#39;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="8f9fb541975c90e69dc212d5d656ac29f8fae245">
  <div class="header">
    <h3>test/do_test_assert_71.sh</h3>
    <h4><span class="yellow">87.5 %</span> covered</h4>
    <div>
      <b>16</b> relevant lines. 
      <span class="green"><b>14</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">STACK_TRACE=no</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="4">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">@test:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success false &quot;test_01&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="11">
          
          
          <code class="ruby">@teardown: {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success false &quot;teardown_test&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="15">
          
          
          <code class="ruby">@teardown_fixture: {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success false &quot;teardown_test_suite&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="19">
          <span class="hits">3</span>
          
          <code class="ruby">try: assert_success false &quot;first&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="20">
          <span class="hits">2</span>
          
          <code class="ruby">catch: print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="23">
          <span class="hits">3</span>
          
          <code class="ruby">try: assert_success false &quot;second&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">catch: print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">@run_tests</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="a7db846c9f66e01582f4ef478d4a5f2a3da25f5a">
  <div class="header">
    <h3>test/do_test_assert_nosubshell.sh</h3>
    <h4><span class="yellow">86.67 %</span> covered</h4>
    <div>
      <b>15</b> relevant lines. 
      <span class="green"><b>13</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">FAIL_FAST=1</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="4">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">@test: &quot;Assertions should not fail when the assertion succeeds&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success &quot;true&quot; &quot;ok&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure &quot;false&quot; &quot;nok&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">@test: &quot;assert_success should fail when the assertion is false&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success &quot;true&quot; &quot;ok&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success &quot;false&quot; &quot;nok&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">@test: &quot;assert_failure should fail when the assertion is true&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="20">
          
          
          <code class="ruby">  assert_failure &quot;true&quot; &quot;ok&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="21">
          
          
          <code class="ruby">  assert_failure &quot;false&quot; &quot;nok&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">@run_tests</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="62c1e678fb00812d3af81ae83506859ace738e24">
  <div class="header">
    <h3>test/do_test_config_LOG_vars.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>4</b> relevant lines. 
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="6" data-linenumber="1">
          <span class="hits">6</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="3">
          <span class="hits">12</span>
          
          <code class="ruby">eval $1</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="4">
          <span class="hits">18</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="6">
          <span class="hits">6</span>
          
          <code class="ruby">echo &quot;lorem ipsum&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="9a40854605cf88dcb052c4ecdedba84c54779221">
  <div class="header">
    <h3>test/do_test_config_STACK_TRACE.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>9</b> relevant lines. 
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">FAIL_FAST=</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="4">
          <span class="hits">6</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">func1() {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">  func2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">func2() {</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="11">
          <span class="hits">4</span>
          
          <code class="ruby">  false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">@test:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">  func1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">@run_tests</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="7662fcb00f697d8dbf6167128a73efd662f1b4fc">
  <div class="header">
    <h3>test/do_test_error_reporting.sh</h3>
    <h4><span class="yellow">87.5 %</span> covered</h4>
    <div>
      <b>32</b> relevant lines. 
      <span class="green"><b>28</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="27" data-linenumber="1">
          <span class="hits">27</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="2">
          <span class="hits">20</span>
          
          <code class="ruby">STACK_TRACE=no</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="3">
          <span class="hits">20</span>
          
          <code class="ruby">PRUNE_PATH=&#39;*/&#39;</code>
        </li>
      
        <li class="covered" data-hits="60" data-linenumber="4">
          <span class="hits">60</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">func1() {</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="7">
          <span class="hits">11</span>
          
          <code class="ruby">  [[ $FAIL_FUNC != *\[$FUNCNAME\]* ]] || false</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="8">
          <span class="hits">8</span>
          
          <code class="ruby">  func2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">func2() {</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="12">
          <span class="hits">10</span>
          
          <code class="ruby">  [[ $FAIL_FUNC != *\[$FUNCNAME\]* ]] || false</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="13">
          <span class="hits">7</span>
          
          <code class="ruby">  func_assert</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="16">
          <span class="hits">20</span>
          
          <code class="ruby">@test:</code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="17">
          <span class="hits">20</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="18" data-linenumber="18">
          <span class="hits">18</span>
          
          <code class="ruby">  [[ $FAIL_FUNC != *\[$FUNCNAME\]* ]] || false</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="19">
          <span class="hits">9</span>
          
          <code class="ruby">  func1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="22">
          
          
          <code class="ruby">@teardown: {</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="23">
          <span class="hits">35</span>
          
          <code class="ruby">  [[ $FAIL_FUNC != *\[$FUNCNAME\]* ]] || false</code>
        </li>
      
        <li class="covered" data-hits="11" data-linenumber="24">
          <span class="hits">11</span>
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="26">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="27">
          
          
          <code class="ruby">@teardown_fixture: {</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="28">
          <span class="hits">28</span>
          
          <code class="ruby">  [[ $FAIL_FUNC != *\[$FUNCNAME\]* ]] || false</code>
        </li>
      
        <li class="covered" data-hits="10" data-linenumber="29">
          <span class="hits">10</span>
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">func_assert() {</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="33">
          <span class="hits">8</span>
          
          <code class="ruby">  [[ $FAIL_FUNC != *\[$FUNCNAME\]* ]] || assert_success false</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="34">
          <span class="hits">6</span>
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">@setup: {</code>
        </li>
      
        <li class="covered" data-hits="27" data-linenumber="38">
          <span class="hits">27</span>
          
          <code class="ruby">  [[ $FAIL_FUNC != *\[$FUNCNAME\]* ]] || false</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="39">
          <span class="hits">15</span>
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">@setup_fixture: {</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="43">
          <span class="hits">28</span>
          
          <code class="ruby">  [[ $FAIL_FUNC != *\[$FUNCNAME\]* ]] || false</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="44">
          <span class="hits">16</span>
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="47">
          <span class="hits">20</span>
          
          <code class="ruby">FAIL_FUNC=$1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="20" data-linenumber="49">
          <span class="hits">20</span>
          
          <code class="ruby">if [[ $INLINE ]]; then</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="50">
          <span class="hits">8</span>
          
          <code class="ruby">  start_test &quot;do_test_error_reporting inline&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="51">
          <span class="hits">4</span>
          
          <code class="ruby">  test_01</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="52">
          <span class="hits">3</span>
          
          <code class="ruby">  start_test &quot;do_test_error_reporting inline maybe not reached&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">else</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="54">
          <span class="hits">12</span>
          
          <code class="ruby">  @run_tests</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">fi</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="defa2f54ccb462e2ac95ceb4f401d0316076d272">
  <div class="header">
    <h3>test/do_test_ignored.sh</h3>
    <h4><span class="yellow">88.89 %</span> covered</h4>
    <div>
      <b>9</b> relevant lines. 
      <span class="green"><b>8</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">@test: &quot;test_01&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">  false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">@test: &quot;test_02&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="11">
          
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">@run_tests</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="f96e5293cd6ad011d92bd081929c50853f09d962">
  <div class="header">
    <h3>test/do_test_includes.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>6</b> relevant lines. 
      <span class="green"><b>6</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">@test:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">@run_tests</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="36c0793e8833db0859fb5df312ecb0ac0719979d">
  <div class="header">
    <h3>test/do_test_inline.sh</h3>
    <h4><span class="red">71.43 %</span> covered</h4>
    <div>
      <b>14</b> relevant lines. 
      <span class="green"><b>10</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="4" data-linenumber="1">
          <span class="hits">4</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="2">
          <span class="hits">12</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="4">
          
          
          <code class="ruby">@setup_fixture: {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">  echo setup_test_suite &gt;&gt;&quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="8">
          
          
          <code class="ruby">@teardown_fixture: {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">  echo teardown_test_suite &gt;&gt;&quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="12">
          
          
          <code class="ruby">@setup: {</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="13">
          <span class="hits">4</span>
          
          <code class="ruby">  echo setup_test &gt;&gt;&quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="16">
          
          
          <code class="ruby">@teardown: {</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="17">
          <span class="hits">4</span>
          
          <code class="ruby">  echo teardown_test &gt;&gt;&quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="20">
          <span class="hits">8</span>
          
          <code class="ruby">[ &quot;$1&quot; != fail ] || false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="22">
          <span class="hits">2</span>
          
          <code class="ruby">start_test &quot;do_test_inline ok&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">start_test &quot;do_test_inline fail&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="25">
          <span class="hits">4</span>
          
          <code class="ruby">false</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="225ba862885f6e2e66eaac73054976d8a4c3dfc8">
  <div class="header">
    <h3>test/do_test_log.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>9</b> relevant lines. 
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">TEST_SCRIPT=&quot;$(readlink -f &quot;$0&quot;)&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">TEST_SCRIPT_DIR=$(dirname &quot;$TEST_SCRIPT&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">source &quot;$TEST_SCRIPT_DIR&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;passing test&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">echo output</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">echo stderr &gt;&amp;2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;failing test&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">false</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="c2fdac3fc75b72565eb3d1c6bdea7e21e4a37ace">
  <div class="header">
    <h3>test/do_test_run_test_script_63.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>3</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">echo lorem ipsum</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="d39b73029e3f0c65783443c86b2fe0097904e3bf">
  <div class="header">
    <h3>test/do_test_teardown.sh</h3>
    <h4><span class="yellow">85.71 %</span> covered</h4>
    <div>
      <b>14</b> relevant lines. 
      <span class="green"><b>12</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="5" data-linenumber="1">
          <span class="hits">5</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="9" data-linenumber="2">
          <span class="hits">9</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="4">
          
          
          <code class="ruby">@teardown_fixture: {</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="5">
          <span class="hits">3</span>
          
          <code class="ruby">  echo teardown_test_suite</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="6">
          <span class="hits">5</span>
          
          <code class="ruby">  [[ $command != teardown_test_suite ]] || false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="9">
          
          
          <code class="ruby">@teardown: {</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="10">
          <span class="hits">3</span>
          
          <code class="ruby">  echo teardown_test</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="11">
          <span class="hits">5</span>
          
          <code class="ruby">  [[ $command != teardown_test ]] || false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="14">
          <span class="hits">3</span>
          
          <code class="ruby">@test:</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="15">
          <span class="hits">3</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="16">
          <span class="hits">3</span>
          
          <code class="ruby">  echo test_01</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="17">
          <span class="hits">3</span>
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="20">
          <span class="hits">3</span>
          
          <code class="ruby">command=$1</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="21">
          <span class="hits">3</span>
          
          <code class="ruby">@run_tests</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="f4c9b3c040d8a4e84c4eb1c1508c53a4531b1b5d">
  <div class="header">
    <h3>test/do_test_teardown_fail.sh</h3>
    <h4><span class="red">66.67 %</span> covered</h4>
    <div>
      <b>12</b> relevant lines. 
      <span class="green"><b>8</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="6" data-linenumber="1">
          <span class="hits">6</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="2">
          <span class="hits">6</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="4">
          
          
          <code class="ruby">@teardown_fixture: {</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="5">
          <span class="hits">4</span>
          
          <code class="ruby">  false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="6">
          
          
          <code class="ruby">  echo &quot;ERROR: never reached&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="9">
          
          
          <code class="ruby">@teardown: {</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="10">
          <span class="hits">4</span>
          
          <code class="ruby">  false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="11">
          
          
          <code class="ruby">  echo &quot;ERROR: never reached&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby">@test:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">@run_tests</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="c1fc5db1e2f3cd057bc28fb3c813938f9a350950">
  <div class="header">
    <h3>test/do_test_tmpdir_74.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>9</b> relevant lines. 
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">TMPDIR=$TEST_TMPDIR</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="3">
          <span class="hits">6</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">start_test &quot;#74: Use TMPDIR for temporary files&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">create_exception &quot;fake&quot; &quot;fake&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">find &quot;$TMPDIR&quot; -type f -o -type p</code>
        </li>
      
        <li class="covered" data-hits="6" data-linenumber="8">
          <span class="hits">6</span>
          
          <code class="ruby">TMPFILE_COUNT=$(find &quot;$TMPDIR&quot; -type f -o -type p | wc -l)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">rm -f &quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">assert_equals $1 &quot;$TMPFILE_COUNT&quot; &quot;Wrong count of temporary files in $TMPDIR&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="5844447a8b8742a8f68752bf33f8ba3b7b1bb446">
  <div class="header">
    <h3>test/do_test_validate_value.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>1</b> relevant lines. 
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="5fe3f9d0d519fd9ceef67c149a2b6466913ca27a">
  <div class="header">
    <h3>test/files/_include_test1.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>1</b> relevant lines. 
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">include_test1() {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  echo &quot;included!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">}</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="843b6534af01bda6cf77c90325856b705fb4dcd7">
  <div class="header">
    <h3>test/files/_include_test2.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>1</b> relevant lines. 
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">include_test2() {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">  echo &quot;included!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">}</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="44a7971f8e5490a87d9b72a69f2d876c8c54963e">
  <div class="header">
    <h3>test/files/test.sh.config.FILE</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>3</b> relevant lines. 
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">VERBOSE=0</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">INCLUDE_GLOB=&quot;*&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="3">
          <span class="hits">1</span>
          
          <code class="ruby">INCLUDE_PATH=CONFIG_FILE</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="85af8e6f32696094c4de2e86ab093af64963f7fc">
  <div class="header">
    <h3>test/files/test.sh.config.default</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>4</b> relevant lines. 
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="2" data-linenumber="1">
          <span class="hits">2</span>
          
          <code class="ruby">VERBOSE=0</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="2">
          <span class="hits">2</span>
          
          <code class="ruby">INCLUDE_GLOB=&quot;*&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="3">
          <span class="hits">2</span>
          
          <code class="ruby">INCLUDE_PATH=default</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">FAIL_FAST=zz</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="6494090a46d1ee11abaaa6366af2e9b07aa1e494">
  <div class="header">
    <h3>test/include/functions.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>18</b> relevant lines. 
      <span class="green"><b>18</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">generate_test() {</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="2">
          <span class="hits">8</span>
          
          <code class="ruby">  THE_TEST_NAME=the_test.sh</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="3">
          <span class="hits">8</span>
          
          <code class="ruby">  THE_TEST=$TEST_TMP/$THE_TEST_NAME</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="4">
          <span class="hits">8</span>
          
          <code class="ruby">  mkdir -p &quot;$TEST_TMP&quot;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="5">
          <span class="hits">8</span>
          
          <code class="ruby">  cat &gt;&quot;$THE_TEST&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="6">
          <span class="hits">8</span>
          
          <code class="ruby">source &quot;$TESTSH&quot;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="7">
          <span class="hits">8</span>
          
          <code class="ruby">$1</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="8">
          <span class="hits">8</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="9">
          <span class="hits">8</span>
          
          <code class="ruby">  chmod a+x &quot;$THE_TEST&quot;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="10">
          <span class="hits">8</span>
          
          <code class="ruby">  OUT=$THE_TEST.out</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">check_output() {</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="14">
          <span class="hits">8</span>
          
          <code class="ruby">  sed -i -e &#39;s/\([ :]\)[0-9]\+\([:)]\)/\1\2/&#39; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="15">
          <span class="hits">8</span>
          
          <code class="ruby">  cat &gt;&quot;$TEST_TMP&quot;/expected</code>
        </li>
      
        <li class="covered" data-hits="8" data-linenumber="16">
          <span class="hits">8</span>
          
          <code class="ruby">  diff &quot;$TEST_TMP&quot;/expected &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">generate_test_fail_check() {</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="20">
          <span class="hits">7</span>
          
          <code class="ruby">  generate_test &quot;$1&quot;</code>
        </li>
      
        <li class="covered" data-hits="35" data-linenumber="21">
          <span class="hits">35</span>
          
          <code class="ruby">  ! LC_ALL=C LOG_FILE=&quot;$OUT&quot; COLOR=no PRUNE_PATH=&quot;*/&quot; run_test_script &quot;$THE_TEST&quot; || false</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="22">
          <span class="hits">7</span>
          
          <code class="ruby">  check_output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby">generate_test_success_check() {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">  generate_test &quot;$1&quot;</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="27">
          <span class="hits">5</span>
          
          <code class="ruby">  LC_ALL=C LOG_FILE=&quot;$OUT&quot; COLOR=no PRUNE_PATH=&quot;*/&quot; run_test_script &quot;$THE_TEST&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">  check_output</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby">}</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="06b7274d1ae8f943a7d2d81bdb11e38222a8dc95">
  <div class="header">
    <h3>test/test_assert.sh</h3>
    <h4><span class="green">95.56 %</span> covered</h4>
    <div>
      <b>45</b> relevant lines. 
      <span class="green"><b>43</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="3" data-linenumber="1">
          <span class="hits">3</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">INCLUDE_GLOB=&quot;include/*.sh&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">fail_validation() {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">  false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="7">
          
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Assertions should not fail when the assertion succeeds&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success &quot;true&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure &quot;false&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure &quot;fail_validation&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_equals a a</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;assert_success should fail when the assertion is false&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="17">
          <span class="hits">3</span>
          
          <code class="ruby">  try: assert_success false &quot;ok&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">  catch nonzero: print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">  failed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;assert_failure should fail when the assertion is true&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="23">
          <span class="hits">3</span>
          
          <code class="ruby">  try: assert_failure true &quot;nok&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">  catch nonzero: print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">  failed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;assert_equals should fail when the arguments are not equal&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="29">
          <span class="hits">3</span>
          
          <code class="ruby">  try: assert_equals &#39;expected&#39; &#39;current&#39; &#39;wrong&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="30">
          <span class="hits">2</span>
          
          <code class="ruby">  catch nonzero: print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">  failed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Failed assertions should interrupt the test when FAIL_FAST is true&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="35">
          <span class="hits">3</span>
          
          <code class="ruby">  try: run_test_script do_test_assert_nosubshell.sh</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="36">
          <span class="hits">2</span>
          
          <code class="ruby">  catch nonzero: print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">  failed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">ffail() {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="41">
          <span class="hits">2</span>
          
          <code class="ruby">  false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="42">
          
          
          <code class="ruby">  echo &quot;What?!&quot; &gt;&quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#89: assert_failure should execute the expression in errexit context&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">  OUT=&quot;$TEST_SCRIPT_DIR&quot;/.test_assert.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">  rm -f &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure ffail</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure &quot;[[ -f \&quot;$OUT\&quot; ]]&quot; &quot;The file should not have been created&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">  rm -f &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#98: non-zero exit code in the expression of assert_failure prints the failure but does not print an assertion failure&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="52">
          <span class="hits">1</span>
          
          <code class="ruby">  generate_test_success_check &#39;assert_failure &quot;[[ a = b ]]&quot;&#39; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] Expected failure:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] implicit exception: Error in _eval(test.sh:): &#39;[[ a = b ]]&#39; exited with status 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at assert_failure(test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="56">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at main(the_test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="57">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="3094e1a7acf8b1329f2ca82f60a548a42be71e49">
  <div class="header">
    <h3>test/test_assert_71.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>9</b> relevant lines. 
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">FILES_DIR=$TEST_SCRIPT_DIR/files</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">COMPANION_TEST=do_$(basename &quot;$TEST_SCRIPT&quot;)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">COMPANION_TEST_OUT=$TEST_SCRIPT_DIR/testout/$(basename &quot;$COMPANION_TEST&quot;).out</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"># TODO: valida el contenido de las stack traces, esto debera hacerlo el test de stack traces</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"># TODO: usar parser para validar log</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#71: Assertion failures should not disable further error reporting&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="11">
          <span class="hits">3</span>
          
          <code class="ruby">  ( ! PRUNE_PATH=&quot;*/&quot; COLOR=no run_test_script &quot;$COMPANION_TEST&quot; || false )</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">  EXPECTED_OUT=$FILES_DIR/do_test_assert_71.out</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">  sed -e &#39;s/:[0-9]*)/:)/&#39; &quot;$COMPANION_TEST_OUT&quot; | diff &quot;$EXPECTED_OUT&quot; -</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="733bedba99e36c2c63777d182f96d56eab733c05">
  <div class="header">
    <h3>test/test_assert_76.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>31</b> relevant lines. 
      <span class="green"><b>31</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">my_func() {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">  echo called &gt;&quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">OUT=&quot;$TEST_SCRIPT_DIR&quot;/.test_assert_76.out</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#76: assert_equals never evaluates its arguments&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">  rm -f &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_equals my_func my_func</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">  [[ ! -f &quot;$OUT&quot; ]]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">  echo -n $(assert_equals zzz my_func)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">  rm -f &quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">  [[ ! -f &quot;$OUT&quot; ]]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">  echo -n $(assert_equals my_func zzz)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">  rm -f &quot;$_EXCEPTIONS_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">  [[ ! -f &quot;$OUT&quot; ]]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_equals &quot;\&quot;&quot;&#39;$(ls|wc -l)&#39; &quot;\&quot;&quot;&#39;$(ls|wc -l)&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#76: failures in assertion functions don&#39;t reevaluate the expression&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">  rm -f &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="25">
          <span class="hits">3</span>
          
          <code class="ruby">  try: assert_success &quot;! my_func&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="26">
          <span class="hits">2</span>
          
          <code class="ruby">  catch: print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">  diff - &quot;$OUT&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">called</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">  rm -f &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="33">
          <span class="hits">3</span>
          
          <code class="ruby">  try: assert_failure &#39;my_func&#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">  catch: print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">  diff - &quot;$OUT&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">called</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="6a1e7ff026a96b6137adfc7367250c73afa41859">
  <div class="header">
    <h3>test/test_assert_escaping_62.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>16</b> relevant lines. 
      <span class="green"><b>16</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#62: The expression passed to assert_success should reach the evaluation point unchanged&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_equals &quot;&#39;pepe&#39;&quot; &quot;&#39;pepe&#39;&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">  assert_equals &quot;&#39;pepe&#39;&quot; &quot;$(echo &quot;&#39;pepe&#39;&quot;)&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  VAR=&quot;pepe&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">  assert_equals &quot;&#39;pepe&#39;&quot; &quot;$(echo &quot;&#39;$VAR&#39;&quot;)&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  V=V1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success &#39;[[ V1 =  &quot;$V&quot; ]]&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success &quot;[[ V1 = \&quot;$V\&quot; ]]&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">  V=&quot;V1 V2&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure &quot;[[ V1 = \&quot;$V\&quot; ]]&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">  unset V</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure &quot;[[ V1 = \&quot;$V\&quot; ]]&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">  V=&quot;&#39;V1 V2&#39;&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success &quot;[[ \&quot;&#39;V1 V2&#39;\&quot; = \&quot;$V\&quot; ]]&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="f324393340da3127cee0439722a67db514abfe48">
  <div class="header">
    <h3>test/test_config.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>65</b> relevant lines. 
      <span class="green"><b>65</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">FILES_DIR=$TEST_SCRIPT_DIR/files</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The configuration file should be loaded from the default location&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">  unset VERBOSE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">  unset INCLUDE_GLOB</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  unset INCLUDE_PATH</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">  unset CONFIG_FILE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  cp &quot;$FILES_DIR&quot;/test.sh.config.default &quot;$TESTSH_DIR&quot;/test.sh.config</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">  TEST_SCRIPT_DIR=&quot;$TESTSH_DIR&quot; load_config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  rm &quot;$TESTSH_DIR&quot;/test.sh.config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$VERBOSE&quot; = 0 ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_GLOB&quot; = &quot;*&quot; ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_PATH&quot; = default ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The configuration file should be loaded from CONFIG_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">  unset VERBOSE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">  unset INCLUDE_GLOB</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">  unset INCLUDE_PATH</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">  unset CONFIG_FILE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">  CONFIG_FILE=&quot;$FILES_DIR&quot;/test.sh.config.FILE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">  load_config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$VERBOSE&quot; = 0 ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_GLOB&quot; = &quot;*&quot; ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_PATH&quot; = CONFIG_FILE ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The configuration file should be loaded from CONFIG_PATH&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">  unset VERBOSE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">  unset INCLUDE_GLOB</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">  unset INCLUDE_PATH</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">  unset CONFIG_FILE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">  cp &quot;$FILES_DIR&quot;/test.sh.config.DIR &quot;$TEST_TMP&quot;/test.sh.config</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">  TEST_SCRIPT_DIR=&quot;$TEST_TMP&quot; load_config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">  rm &quot;$TEST_TMP&quot;/test.sh.config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$VERBOSE&quot; = 0 ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_GLOB&quot; = &quot;*&quot; ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_PATH&quot; = CONFIG_DIR ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Configuration variables in the environment should be respected&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">  VERBOSE=verbose</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="43">
          <span class="hits">1</span>
          
          <code class="ruby">  INCLUDE_GLOB=include_glob</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">  INCLUDE_PATH=include_path</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">  unset CONFIG_FILE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">  load_config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$VERBOSE&quot; = verbose ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_GLOB&quot; = include_glob ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_PATH&quot; = include_path ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Configuration variables in the environment should override the configuration file&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="52">
          <span class="hits">1</span>
          
          <code class="ruby">  VERBOSE=verbose</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">  INCLUDE_GLOB=include_glob</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">  INCLUDE_PATH=include_path</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">  unset CONFIG_FILE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="56">
          <span class="hits">1</span>
          
          <code class="ruby">  CONFIG_FILE=&quot;$FILES_DIR&quot;/test.sh.config.default</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="57">
          <span class="hits">1</span>
          
          <code class="ruby">  load_config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$VERBOSE&quot; = verbose ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="59">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_GLOB&quot; = include_glob ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="60">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_PATH&quot; = include_path ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="62">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Empty variables should be respected over defaults&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="63">
          <span class="hits">1</span>
          
          <code class="ruby">  INCLUDE_GLOB=</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="64">
          <span class="hits">1</span>
          
          <code class="ruby">  unset CONFIG_FILE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="65">
          <span class="hits">1</span>
          
          <code class="ruby">  load_config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$INCLUDE_GLOB&quot; = &quot;&quot; ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Empty variables should be respected over configuration file&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="69">
          <span class="hits">1</span>
          
          <code class="ruby">  FAIL_FAST=</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">  unset CONFIG_FILE</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="71">
          <span class="hits">1</span>
          
          <code class="ruby">  CONFIG_FILE=&quot;$FILES_DIR&quot;/test.sh.config.default</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">  load_config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">  [ &quot;$FAIL_FAST&quot; = &quot;&quot; ]</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="5f3201a7bb7b65d34ea026ab3b3b86d94f3d02f9">
  <div class="header">
    <h3>test/test_config_FAIL_FAST.sh</h3>
    <h4><span class="green">95.24 %</span> covered</h4>
    <div>
      <b>21</b> relevant lines. 
      <span class="green"><b>20</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">@test: &quot;test_fail&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">  touch &quot;$TEST_TMP&quot;/.test_fail</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="8">
          <span class="hits">4</span>
          
          <code class="ruby">  false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="9">
          
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">@test: &quot;test_ok&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">  touch &quot;$TEST_TMP&quot;/.test_ok</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">  true</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"># start_test &quot;Any command that fails in the body of a test function should make the test to fail&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"># try:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">#   @run_tests 3&gt;&amp;1</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby"># catch nonzero: print_exception</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"># endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="23">
          
          
          <code class="ruby"># failed</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="24">
          
          
          <code class="ruby"># [ -f &quot;$TEST_TMP&quot;/.test_fail ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;When FAIL_FAST is true the first test failure should interrupt the script&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">rm -f &quot;$TEST_TMP&quot;/.test_fail &quot;$TEST_TMP&quot;/.test_ok</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">assert_failure &#39;push_exit_handler &quot;unset _EXPLICIT_EXIT || true&quot;; FAIL_FAST=1 @run_tests 3&gt;&amp;1&#39; &quot;run_tests exited successfully&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">[   -f &quot;$TEST_TMP&quot;/.test_fail ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">[ ! -f &quot;$TEST_TMP&quot;/.test_ok ]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;When FAIL_FAST is false failures should not interrupt the script but signal failure at the end&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">rm -f &quot;$TEST_TMP&quot;/.test_fail &quot;$TEST_TMP&quot;/.test_ok</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">assert_failure &#39;push_exit_handler &quot;unset _EXPLICIT_EXIT || true&quot;; FAIL_FAST= @run_tests 3&gt;&amp;1&#39; &quot;run_tests exited successfully&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">[ -f &quot;$TEST_TMP&quot;/.test_fail ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">[ -f &quot;$TEST_TMP&quot;/.test_ok ]</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="2fd1ca61dd9eaaa8ecc38daeca4d4d5f0d06c1fe">
  <div class="header">
    <h3>test/test_config_LOG_vars_50.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>47</b> relevant lines. 
      <span class="green"><b>47</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">export TEST_SCRIPT_DIR</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;LOG_DIR_NANME&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">run_test_script do_test_config_LOG_vars.sh &quot;LOG_DIR_NAME=config_LOG_vars&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">LOG=$TEST_SCRIPT_DIR/config_LOG_vars/do_test_config_LOG_vars.sh.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$LOG&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">lorem ipsum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$LOG&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;LOG_DIR&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">run_test_script do_test_config_LOG_vars.sh &#39;LOG_DIR=&quot;$TEST_SCRIPT_DIR&quot;/config_LOG_vars&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">LOG=$TEST_SCRIPT_DIR/config_LOG_vars/do_test_config_LOG_vars.sh.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$LOG&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">lorem ipsum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$LOG&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;LOG_NAME&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">run_test_script do_test_config_LOG_vars.sh &#39;LOG_NAME=config_LOG_vars.log&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">LOG=$TEST_SCRIPT_DIR/$LOG_DIR_NAME/config_LOG_vars.log</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$LOG&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">lorem ipsum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$LOG&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;LOG_FILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">run_test_script do_test_config_LOG_vars.sh &quot;LOG_FILE=${TMPDIR:-/tmp}/config_LOG_vars.log&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">LOG=${TMPDIR:-/tmp}/config_LOG_vars.log</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$LOG&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">lorem ipsum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$LOG&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;LOG_MODE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">run_test_script do_test_config_LOG_vars.sh &#39;LOG_MODE=overwrite&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">LOG=$TEST_SCRIPT_DIR/testout/do_test_config_LOG_vars.sh.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$LOG&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">lorem ipsum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="43">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">run_test_script do_test_config_LOG_vars.sh &#39;LOG_MODE=append&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$LOG&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">lorem ipsum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">lorem ipsum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$LOG&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="93a6b220c100f9ec0e1e336b4bcf4ab3e1a0a781">
  <div class="header">
    <h3>test/test_config_STACK_TRACE.sh</h3>
    <h4><span class="yellow">84.38 %</span> covered</h4>
    <div>
      <b>32</b> relevant lines. 
      <span class="green"><b>27</b> lines covered</span> and
      <span class="red"><b>5</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">OUT=&quot;$LOG_DIR&quot;/do_$(basename &quot;$LOG_FILE&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">@test: &quot;STACK_TRACE should accept only valid values&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">  for i in no full; do</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="9">
          <span class="hits">4</span>
          
          <code class="ruby">    STACK_TRACE=$i load_config</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">  done</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">    STACK_TRACE=pepe load_config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">  catch:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">    if exception_is &#39;configuration&#39;; then</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">      log_ok &quot;Expected exception:&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">      print_exception &#39;log_ok&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">    else</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="18">
          
          
          <code class="ruby">      rethrow</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby">    fi</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">@test: &quot;When STACK_TRACE=no no stack traces should be produced&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure &#39;STACK_TRACE=no run_test_script do_test_config_STACK_TRACE.sh&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure &quot;grep &#39;[test.sh].*  at &#39; \&quot;$OUT\&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="28">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">@skip @test: &quot;When STACK_TRACE=pruned the stack traces should be truncated before the first test.sh frame&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">  assert_failure &#39;STACK_TRACE=pruned run_test_script do_test_config_STACK_TRACE.sh&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="32">
          
          
          <code class="ruby">  ! grep &#39;[test.sh].*  at .*(.*test.sh:[0-9]*)&#39; &quot;$OUT&quot; || false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">@skip @test: &quot;When STACK_TRACE=compact the stack traces should not contain frames in test.sh&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="37">
          
          
          <code class="ruby">  assert_failure &#39;STACK_TRACE=compact run_test_script do_test_config_STACK_TRACE.sh&#39;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="38">
          
          
          <code class="ruby">  ! grep &#39;[test.sh].*  at .*(.*test.sh:[0-9]*)&#39; &quot;$OUT&quot; || false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">@test: &quot;When STACK_TRACE=full the stack traces should contain the complete call stack&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="43">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure &#39;STACK_TRACE=full run_test_script do_test_config_STACK_TRACE.sh&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_success &quot;grep &#39;[test.sh].*  at .*(.*test.sh:[0-9]*)&#39; \&quot;$OUT\&quot;&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">@run_tests</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="de8bc87d158233f652cc7b4d0ce88bdf4fd74f9e">
  <div class="header">
    <h3>test/test_error_reporting.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>60</b> relevant lines. 
      <span class="green"><b>60</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">OUT=&quot;$LOG_DIR&quot;/do_$(basename &quot;$LOG_FILE&quot;)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">prune_path &quot;$TEST_SCRIPT_DIR&quot;/do_test_error_reporting.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The error message should identify the source, line, command and exit code&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">! run_test_script do_test_error_reporting.sh [func2] || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in func2(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">! run_test_script do_test_error_reporting.sh [func1] || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in func1(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">! run_test_script do_test_error_reporting.sh [test_01] || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in test_01(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The error message should identify the source, line, command and exit code when triggered in teardown_test&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">INLINE=     run_test_script do_test_error_reporting.sh [teardown_test]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="18">
          <span class="hits">3</span>
          
          <code class="ruby">[[ $(grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot; | wc -l) = 1 ]]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">INLINE=true run_test_script do_test_error_reporting.sh [teardown_test]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="21">
          <span class="hits">3</span>
          
          <code class="ruby">[[ $(grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot; | wc -l) = 2 ]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The error message should identify the source, line, command and exit code when triggered in teardown_test_suite&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">INLINE=     run_test_script do_test_error_reporting.sh [teardown_test_suite]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test_suite(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="26">
          <span class="hits">2</span>
          
          <code class="ruby">INLINE=true run_test_script do_test_error_reporting.sh [teardown_test_suite]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"># aparente error en bash: el comando reportado pasa a ser &#39;[[ $FAIL_FUNC != $FUNCNAME ]]&#39; en lugar de &#39;false&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test_suite(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The error message should identify the source, line, command and exit code when triggered in assert&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">! run_test_script do_test_error_reporting.sh [func_assert] || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in _eval(test.sh:[[:digit:]]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The error message should identify the source, line, command and exit code when triggered in setup_test_suite&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">! INLINE=     run_test_script do_test_error_reporting.sh [setup_test_suite] || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in setup_test_suite(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="37">
          <span class="hits">3</span>
          
          <code class="ruby">[[ $(grep &quot;Error in setup_test_suite(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot; | wc -l) = 1 ]]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">! INLINE=true run_test_script do_test_error_reporting.sh [setup_test_suite] || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in setup_test_suite(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="40">
          <span class="hits">3</span>
          
          <code class="ruby">[[ $(grep &quot;Error in setup_test_suite(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot; | wc -l) = 1 ]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The error message should identify the source, line, command and exit code when triggered in setup_test&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="43">
          <span class="hits">2</span>
          
          <code class="ruby">! INLINE=     run_test_script do_test_error_reporting.sh [setup_test] || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in setup_test(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="45">
          <span class="hits">3</span>
          
          <code class="ruby">[[ $(grep &quot;Error in setup_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot; | wc -l) = 1 ]]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="46">
          <span class="hits">2</span>
          
          <code class="ruby">! INLINE=true run_test_script do_test_error_reporting.sh [setup_test] || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in setup_test(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="48">
          <span class="hits">3</span>
          
          <code class="ruby">[[ $(grep &quot;Error in setup_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot; | wc -l) = 1 ]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="50">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Teardown semantics should be enforced when both teardown_test and teardown_test_suite fail&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="51">
          <span class="hits">2</span>
          
          <code class="ruby">INLINE=     run_test_script do_test_error_reporting.sh [teardown_test][teardown_test_suite]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby"># aparente error en bash: el comando reportado pasa a ser &#39;[[ $FAIL_FUNC != $FUNCNAME ]]&#39; en lugar de &#39;false&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test_suite(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="55">
          <span class="hits">3</span>
          
          <code class="ruby">[[ $(grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot; | wc -l) = 1 ]]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="56">
          <span class="hits">2</span>
          
          <code class="ruby">INLINE=true run_test_script do_test_error_reporting.sh [teardown_test][teardown_test_suite]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby"># aparente error en bash: el comando reportado pasa a ser &#39;[[ $FAIL_FUNC != $FUNCNAME ]]&#39; en lugar de &#39;false&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="59">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test_suite(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="60">
          <span class="hits">3</span>
          
          <code class="ruby">[[ $(grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot; | wc -l) = 2 ]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="62">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Teardown semantics should be enforced when the test, teardown_test and teardown_test_suite fail&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="63">
          <span class="hits">2</span>
          
          <code class="ruby">! INLINE=     run_test_script do_test_error_reporting.sh [test_01][teardown_test][teardown_test_suite] || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="64">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in test_01(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby"># aparente error en bash: el comando reportado pasa a ser &#39;[[ $FAIL_FUNC != $FUNCNAME ]]&#39; en lugar de &#39;false&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="67">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test_suite(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="68">
          <span class="hits">3</span>
          
          <code class="ruby">[[ $(grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot; | wc -l) = 1 ]]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="69">
          <span class="hits">2</span>
          
          <code class="ruby">! INLINE=true run_test_script do_test_error_reporting.sh [test_01][teardown_test][teardown_test_suite] || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in test_01(do_test_error_reporting.sh:[0-9]\+): &#39;false&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby"># aparente error en bash: el comando reportado pasa a ser &#39;[[ $FAIL_FUNC != $FUNCNAME ]]&#39; en lugar de &#39;false&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Error in teardown_test_suite(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="74">
          <span class="hits">3</span>
          
          <code class="ruby">[[ $(grep &quot;Error in teardown_test(do_test_error_reporting.sh:[0-9]\+): &#39;.*&#39; exited with status 1&quot; &quot;$OUT&quot; | wc -l) = 1 ]]</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="2b49e5a9cc85b7b93447cf6bbaf25f7e747c9f55">
  <div class="header">
    <h3>test/test_eval_syntax_error.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>28</b> relevant lines. 
      <span class="green"><b>28</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">INCLUDE_GLOB=&quot;include/*.sh&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#98: eval syntax errors in the expression of assert_success are reported as such and not as an assertion failure&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">generate_test_fail_check &#39;assert_success &quot;[[ = b ]]&quot;&#39; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] eval_syntax exception: Syntax error in the expression: [[ = b ]]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] $TESTSH: eval: line : conditional binary operator expected</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at _eval(test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at assert_success(test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at main(the_test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#98: eval syntax errors in the expression of assert_failure are reported as such and not as an assertion failure&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">generate_test_fail_check &#39;assert_failure &quot;[[ = b ]]&quot;&#39; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] eval_syntax exception: Syntax error in the expression: [[ = b ]]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] $TESTSH: eval: line : conditional binary operator expected</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at _eval(test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at assert_failure(test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at main(the_test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#98: eval syntax errors in try/catch nonzero are not caught&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby">STACK_TRACE=no generate_test_fail_check &#39;try: _eval &quot;[[ = b ]]&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">catch nonzero: true</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">endtry&#39; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] eval_syntax exception: Syntax error in the expression: [[ = b ]]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] $TESTSH: eval: line : conditional binary operator expected</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="c5d138650a3c92f908a4d127891f8b98d221e79a">
  <div class="header">
    <h3>test/test_exceptions.sh</h3>
    <h4><span class="yellow">89.19 %</span> covered</h4>
    <div>
      <b>111</b> relevant lines. 
      <span class="green"><b>99</b> lines covered</span> and
      <span class="red"><b>12</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="10" data-linenumber="1">
          <span class="hits">10</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">INCLUDE_GLOB=&quot;include/*.sh&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Exceptions should be caugh in the catch block&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">  CAUGHT=</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">    false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">  catch:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">    CAUGHT=1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_equals 1 &quot;$CAUGHT&quot; &quot;The catch block has not been executed&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Exceptions in the catch block should not overwrite the current exception or _TRY_EXIT_CODE&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">    false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">  catch:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby">    try:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">      true</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">    catch: true</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">    endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">    assert_equals 0 &quot;$_TRY_EXIT_CODE&quot; &quot;The exit code of the inner try/catch block is wrong&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_equals 1 &quot;$_TRY_EXIT_CODE&quot; &quot;The exit code of the outer try/catch block is wrong&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Exceptions thrown from a catch block should ignore the current exception&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="27">
          <span class="hits">2</span>
          
          <code class="ruby">  STACK_TRACE=no generate_test_fail_check &#39;try: false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="28">
          
          
          <code class="ruby">  catch: false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="29">
          
          
          <code class="ruby">  endtry&#39; &lt;&lt;EOF</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="30">
          
          
          <code class="ruby">[test.sh] implicit exception: Error in main(the_test.sh:): &#39;false&#39; exited with status 1</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="31">
          
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Try blocks that do exit with non-zero with no exit command and no ERR trap, generate exception&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">    set +e</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="37">
          <span class="hits">2</span>
          
          <code class="ruby">    false</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="38">
          <span class="hits">2</span>
          
          <code class="ruby">  catch: print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Try blocks that exit do not generate exception and propagate exit&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="43">
          <span class="hits">1</span>
          
          <code class="ruby">  assert_failure &#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">    try:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">      exit 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">    catch: print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">    endtry&#39; &#39;Exception caught or zero exit status&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Nested try/catch blocks do not repeat exceptions if rethrown&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="50">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="51">
          <span class="hits">2</span>
          
          <code class="ruby">    try:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="52">
          <span class="hits">2</span>
          
          <code class="ruby">      false</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="53">
          <span class="hits">2</span>
          
          <code class="ruby">    catch: rethrow</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="54">
          
          
          <code class="ruby">    endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">  catch:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="56">
          <span class="hits">1</span>
          
          <code class="ruby">    print_exception</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="57">
          <span class="hits">4</span>
          
          <code class="ruby">    assert_equals 1 &quot;$(printf &quot;%s\n&quot; &quot;${_EXCEPTION[@]}&quot; | grep Error | wc -l)&quot; &quot;Wrong exception count&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="60">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Nested try/catch blocks do not repeat exceptions if uncaught&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="61">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="62">
          <span class="hits">2</span>
          
          <code class="ruby">    try:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="63">
          <span class="hits">1</span>
          
          <code class="ruby">      throw &#39;error&#39; &quot;Error&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="64">
          <span class="hits">1</span>
          
          <code class="ruby">    catch nonzero: rethrow</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="65">
          
          
          <code class="ruby">    endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">  catch:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="67">
          <span class="hits">1</span>
          
          <code class="ruby">    print_exception</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="68">
          <span class="hits">4</span>
          
          <code class="ruby">    assert_equals 1 &quot;$(printf &quot;%s\n&quot; &quot;${_EXCEPTION[@]}&quot; | grep Error | wc -l)&quot; &quot;Wrong exception count&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="69">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="71">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Pending exceptions are not lost&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="72">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="73">
          <span class="hits">5</span>
          
          <code class="ruby">    echo -n $(false) $(false)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="74">
          <span class="hits">2</span>
          
          <code class="ruby">    false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="75">
          <span class="hits">1</span>
          
          <code class="ruby">  catch:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="76">
          <span class="hits">1</span>
          
          <code class="ruby">    print_exception</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="77">
          <span class="hits">4</span>
          
          <code class="ruby">    assert_equals 3 &quot;$(printf &quot;%s\n&quot; &quot;${_EXCEPTION[@]}&quot; | grep Error | wc -l)&quot; &quot;Wrong exception count&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="78">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="81">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Exceptions in a subshell environment duplicate the exception (undesired feature)&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="82">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="83">
          <span class="hits">3</span>
          
          <code class="ruby">    $(false)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="84">
          <span class="hits">1</span>
          
          <code class="ruby">  catch:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="85">
          <span class="hits">1</span>
          
          <code class="ruby">    print_exception</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="86">
          <span class="hits">4</span>
          
          <code class="ruby">    assert_equals 2 &quot;$(printf &quot;%s\n&quot; &quot;${_EXCEPTION[@]}&quot; | grep Error | wc -l)&quot; &quot;Wrong exception count&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="87">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="89">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The catch block can select multiple exceptions&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="90">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="91">
          <span class="hits">2</span>
          
          <code class="ruby">    false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="92">
          <span class="hits">1</span>
          
          <code class="ruby">  catch error, nonzero:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="93">
          <span class="hits">1</span>
          
          <code class="ruby">    print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="94">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="95">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="96">
          <span class="hits">1</span>
          
          <code class="ruby">    throw error &quot;Error&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="97">
          <span class="hits">1</span>
          
          <code class="ruby">  catch error, nonzero:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="98">
          <span class="hits">1</span>
          
          <code class="ruby">    print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="99">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="101">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The catch block does not catch non selected exceptions&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="102">
          <span class="hits">1</span>
          
          <code class="ruby">  declare_exception pepe</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="103">
          <span class="hits">3</span>
          
          <code class="ruby">  try: true</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="104">
          <span class="hits">2</span>
          
          <code class="ruby">    try:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="105">
          <span class="hits">1</span>
          
          <code class="ruby">      throw pepe &quot;Pepe&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="106">
          <span class="hits">1</span>
          
          <code class="ruby">    catch error, nonzero:</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="107">
          
          
          <code class="ruby">      print_exception</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="108">
          
          
          <code class="ruby">      throw &#39;test_failed&#39; &quot;Caught non-selected exception&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="109">
          
          
          <code class="ruby">    endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="110">
          <span class="hits">1</span>
          
          <code class="ruby">  catch pepe:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="111">
          <span class="hits">1</span>
          
          <code class="ruby">    print_exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="112">
          <span class="hits">1</span>
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="114">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Implicit exceptions propagate the type of the existing pending exception&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="115">
          <span class="hits">1</span>
          
          <code class="ruby">declare_exception pepe</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="116">
          <span class="hits">2</span>
          
          <code class="ruby">try:</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="117">
          <span class="hits">2</span>
          
          <code class="ruby">  try:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="118">
          <span class="hits">1</span>
          
          <code class="ruby">    ( throw pepe &quot;Pepe&quot; )</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="119">
          <span class="hits">1</span>
          
          <code class="ruby">  catch nonzero:</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="120">
          
          
          <code class="ruby">    print_exception</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="121">
          
          
          <code class="ruby">    throw &#39;test_failed&#39; &quot;Implicit exception did not propagate the pending exception&#39;s type&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="122">
          
          
          <code class="ruby">  endtry</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="123">
          <span class="hits">1</span>
          
          <code class="ruby">catch pepe:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="124">
          <span class="hits">1</span>
          
          <code class="ruby">  echo exception=${_EXCEPTION[-1]}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="125">
          <span class="hits">1</span>
          
          <code class="ruby">  print_exception</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="126">
          <span class="hits">2</span>
          
          <code class="ruby">endtry</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="aaaab36669de44972e61a22772132ea24d989825">
  <div class="header">
    <h3>test/test_ignored.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>8</b> relevant lines. 
      <span class="green"><b>8</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">FILES_DIR=$TEST_SCRIPT_DIR/files</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;In managed mode and FAIL_FAST true when a test fails the remaining tests should be displayed as skipped in the main output&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">OUT=$TEST_SCRIPT_DIR/.test_script.out</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">! FAIL_FAST=1 run_test_script do_test_ignored.sh &gt;&quot;$OUT&quot; || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">diff &quot;$FILES_DIR&quot;/test_ignored.out &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">rm -f &quot;$OUT&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="b31f2876e7e798cdc7ad70bf0337c5684a339408">
  <div class="header">
    <h3>test/test_includes.sh</h3>
    <h4><span class="yellow">87.18 %</span> covered</h4>
    <div>
      <b>39</b> relevant lines. 
      <span class="green"><b>34</b> lines covered</span> and
      <span class="red"><b>5</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="5">
          
          
          <code class="ruby">@setup: {</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="6">
          <span class="hits">4</span>
          
          <code class="ruby">  unset -f include_test1</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="7">
          <span class="hits">4</span>
          
          <code class="ruby">  unset -f include_test2</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="8">
          <span class="hits">4</span>
          
          <code class="ruby">  cp &quot;$TEST_SCRIPT_DIR&quot;/files/_include_test1.sh &quot;$TESTSH_DIR&quot;/${SETUP_PREFIX}include_test.sh</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="9">
          <span class="hits">4</span>
          
          <code class="ruby">  cp &quot;$TEST_SCRIPT_DIR&quot;/files/_include_test2.sh &quot;$TEST_SCRIPT_DIR&quot;/${SETUP_PREFIX}include_test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="12">
          
          
          <code class="ruby">@teardown: {</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="13">
          <span class="hits">4</span>
          
          <code class="ruby">  rm &quot;$TESTSH_DIR&quot;/${TEARDOWN_PREFIX}include_test.sh</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="14">
          <span class="hits">4</span>
          
          <code class="ruby">  rm &quot;$TEST_SCRIPT_DIR&quot;/${TEARDOWN_PREFIX}include_test.sh</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="15">
          <span class="hits">4</span>
          
          <code class="ruby">  unset include_test1</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="16">
          <span class="hits">4</span>
          
          <code class="ruby">  unset include_test2</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Files should be included from the default locations&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby">(</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">  load_includes</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">  include_test1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">  include_test2</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="24">
          
          
          <code class="ruby">)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="25">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">SETUP_PREFIX=__</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Files should be included from the default directories with the configured INCLUDE_GLOB&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">INCLUDE_GLOB=&quot;__include*.sh&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">unset INCLUDE_PATH</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="30">
          
          
          <code class="ruby">(</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">  load_config</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">  load_includes</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">  include_test1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">  include_test2</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="35">
          
          
          <code class="ruby">)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">TEARDOWN_PREFIX=$SETUP_PREFIX</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">SETUP_PREFIX=xx_</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Files should be included from the configured INCLUDE_PATH&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="40">
          <span class="hits">1</span>
          
          <code class="ruby">INCLUDE_PATH=&quot;$TEST_SCRIPT_DIR&quot;/files/_include*.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">(</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">  load_includes</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="43">
          <span class="hits">1</span>
          
          <code class="ruby">  include_test1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">  include_test2</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="45">
          
          
          <code class="ruby">)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">TEARDOWN_PREFIX=$SETUP_PREFIX</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Included files should not be reported when reincluded&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="49">
          <span class="hits">2</span>
          
          <code class="ruby">INCLUDE_PATH=&quot;$TEST_SCRIPT_DIR&quot;/files/_include*.sh run_test_script do_test_includes.sh</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="50">
          <span class="hits">1</span>
          
          <code class="ruby">OUT=&quot;$TEST_SCRIPT_DIR&quot;/testout/do_test_includes.sh.out</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="51">
          <span class="hits">3</span>
          
          <code class="ruby">assert_equals 2 &quot;$(grep &quot;\[test.sh\].* Included:&quot; &quot;$OUT&quot; | wc -l)&quot; &quot;wrong count&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="b193d6c21d0be1ca93a7ab4e1b6f7e98461964e0">
  <div class="header">
    <h3>test/test_inline.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>30</b> relevant lines. 
      <span class="green"><b>30</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="4">
          <span class="hits">2</span>
          
          <code class="ruby">export OUTFILE=&quot;$TEST_SCRIPT_DIR&quot;/.test_inline.out</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Inline test failures should display the failed test in the main output&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">OUT=&quot;$TEST_SCRIPT_DIR&quot;/.do_test_inline.sh.main.out</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="8">
          <span class="hits">3</span>
          
          <code class="ruby">( ! COLOR=no VERBOSE= run_test_script do_test_inline.sh &gt;&quot;$OUT&quot; 2&gt;&amp;1 || false )</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$OUT&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">* do_test_inline ok</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">* do_test_inline fail</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Inline tests should invoke setup and teardown functions&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">! run_test_script do_test_inline.sh || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$OUTFILE&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">setup_test_suite</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">setup_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">setup_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test_suite</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="27">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;teardown_test_suite should not get called if setup_test_suite has not been called&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">! run_test_script do_test_inline.sh fail || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">[[ ! -f $OUTFILE ]]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="31">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;teardown_test should not get called if no test has started&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">! run_test_script do_test_inline.sh fail || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">[[ ! -f $OUTFILE ]]</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="1237a4a8a0a998ba9a0991036f5d9bf909162e62">
  <div class="header">
    <h3>test/test_log.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>14</b> relevant lines. 
      <span class="green"><b>14</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;The log file should contain test stdout and stderr&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"># run in a different test script to avoid the race condition on the log output</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">! run_test_script do_test_log.sh || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">OUT=$LOG_DIR/do_test_log.sh.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">grep ^output$ &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">grep ^stderr$ &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Start test events should be logged&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Start test: passing test&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;Start test: failing test&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Test passed events should be logged&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;PASSED: passing test&quot; &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Test failed events should be logged&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">grep &quot;FAILED: failing test&quot; &quot;$OUT&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="b8e482dca8cf4901d577b700f5b6638eaae975f3">
  <div class="header">
    <h3>test/test_prune_path_cache.sh</h3>
    <h4><span class="yellow">88.89 %</span> covered</h4>
    <div>
      <b>18</b> relevant lines. 
      <span class="green"><b>16</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#93: prune_path should put in the cache missing paths&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">_PRUNE_PATH_CACHE=()</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">PRUNEFILE=&quot;$TEST_SCRIPT_DIR&quot;/pepe</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">touch &quot;$PRUNEFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">PRUNE_PATH= prune_path &quot;$PRUNEFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">assert_equals &quot;$PRUNEFILE&quot; &quot;${_PRUNE_PATH_CACHE[$PRUNEFILE]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#93: prune_path should retrieve cached paths from the cache&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby">realpath() {</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="13">
          
          
          <code class="ruby">  unset realpath</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="14">
          
          
          <code class="ruby">  fail &quot;realpath called, should have hit the cache&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">PRUNE_PATH=&quot;*/&quot; prune_path &quot;$PRUNEFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">unset realpath</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">assert_equals &quot;$PRUNEFILE&quot; &quot;${_PRUNE_PATH_CACHE[$PRUNEFILE]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#93: init_prune_path_cache reprocesses the preinitialized cache in subtests&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">_PRUNE_PATH_CACHE=([/hola/pepe]=/hola/pepe)</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="22">
          <span class="hits">4</span>
          
          <code class="ruby">_SUBTEST= PRUNE_PATH=&quot;*/&quot; INITIALIZE_SOURCE_CACHE= init_prune_path_cache</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">assert_equals pepe &quot;${_PRUNE_PATH_CACHE[/hola/pepe]}&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="d4b5b405bfebca59984990ac443037607146521f">
  <div class="header">
    <h3>test/test_regression_30.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>4</b> relevant lines. 
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Regression #30: run_test_script() stalls when the there&#39;s an error in the function&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">assert_failure &quot;run_test_script ./__I_dont_exist__&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="e47dac01100b7306070a9dd01a105b9f9e335093">
  <div class="header">
    <h3>test/test_regression_31.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>27</b> relevant lines. 
      <span class="green"><b>27</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="2">
          <span class="hits">1</span>
          
          <code class="ruby">INCLUDE_GLOB=&quot;include/*.sh&quot;</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Regression #31: double error reporting&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">generate_test_fail_check &#39;assert_equals &quot;$(false)&quot; &quot;&quot;&#39; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] pending_exception exception: Pending exception, probably a masked error in a command substitution</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at check_pending_exceptions(test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at assert_equals(test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at main(the_test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] Pending exception:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] implicit exception: Error in main(the_test.sh:): &#39;false&#39; exited with status 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">generate_test_fail_check &#39;assert_equals &quot;$(false)&quot; &quot;a&quot;&#39; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] pending_exception exception: Pending exception, probably a masked error in a command substitution</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at check_pending_exceptions(test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at assert_equals(test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at main(the_test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] Pending exception:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] implicit exception: Error in main(the_test.sh:): &#39;false&#39; exited with status 1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">generate_test_fail_check &#39;run_test_script ./__I_dont_exist&#39; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">$TESTSH: line : $TEST_TMP/__I_dont_exist: No such file or directory</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh] implicit exception: Error in run_test_script(test.sh:): &#39;&quot;\$test_script&quot; &quot;\$@&quot;&#39; exited with status 127</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">[test.sh]  at main(the_test.sh:)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="ad359d31a35b44a272dbc9eb20ef413b71c8ac46">
  <div class="header">
    <h3>test/test_regression_33.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>17</b> relevant lines. 
      <span class="green"><b>17</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Regression #33: when an include file is matched by more than one glob in INCLUDE_PATH, it is included only once&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">cat &gt;&quot;$TEST_SCRIPT_DIR&quot;/include-regression-33.sh &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">echo &quot;regression #33&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">cat &gt;&quot;$TEST_SCRIPT_DIR&quot;/test-regression-33.sh &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">source test.sh</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">@run_tests</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">chmod a+x &quot;$TEST_SCRIPT_DIR&quot;/test-regression-33.sh</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">cp &quot;$TESTSH&quot; &quot;$TEST_SCRIPT_DIR&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">unset INCLUDE_GLOB</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">unset INCLUDE_PATH</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">( cd &quot;$TEST_SCRIPT_DIR&quot;; run_test_script ./test-regression-33.sh )</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="18">
          <span class="hits">3</span>
          
          <code class="ruby">assert_equals 1 &quot;$(grep &quot;regression #33&quot; &quot;$TEST_SCRIPT_DIR&quot;/testout/test-regression-33.sh.out | wc -l)&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$TEST_SCRIPT_DIR&quot;/include-regression-33.sh &quot;$TEST_SCRIPT_DIR&quot;/test-regression-33.sh &quot;$TEST_SCRIPT_DIR&quot;/test.sh</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="1898ca2c6f8628264ea6019064ef19acf24d93f3">
  <div class="header">
    <h3>test/test_run_test_script_63.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>10</b> relevant lines. 
      <span class="green"><b>10</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">FILES_DIR=$TEST_SCRIPT_DIR/files</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="5">
          <span class="hits">2</span>
          
          <code class="ruby">COMPANION_TEST=do_$(basename &quot;$TEST_SCRIPT&quot;)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">COMPANION_TEST_OUT=$TEST_SCRIPT_DIR/testout/$(basename &quot;$COMPANION_TEST&quot;).out</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#63: run_test_script() interprets relative paths from the current script&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">( cd ..; run_test_script &quot;$COMPANION_TEST&quot; )</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$COMPANION_TEST_OUT&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">lorem ipsum</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="770a5e374ec1fe63c5d017bea753f0a9e2509a14">
  <div class="header">
    <h3>test/test_script.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>7</b> relevant lines. 
      <span class="green"><b>7</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;When executed, test.sh should output the version and github project&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">OUT=$TEST_TMP/out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">&quot;$TESTSH&quot; &gt;&quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">assert_success &#39;grep test.sh\ version &quot;$OUT&quot;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">assert_success &#39;grep See\ https://github.com/pikatoste/test.sh &quot;$OUT&quot;&#39;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="9c6b4db6560f8568581a02ebc630c229ebe56123">
  <div class="header">
    <h3>test/test_setup_error.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>18</b> relevant lines. 
      <span class="green"><b>18</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">OUT=$TEST_SCRIPT_DIR/.test_setup_error.sh.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">FILES_DIR=$TEST_SCRIPT_DIR/files</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;When setup_test_suite fails, an error message should be displayed in the main output&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">! INLINE=     run_test_script do_test_error_reporting.sh [setup_test_suite] &gt;&quot;$OUT&quot; 2&gt;&amp;1 || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">diff &quot;$FILES_DIR&quot;/test_setup_error.1.out &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">rm -f &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">! INLINE=true run_test_script do_test_error_reporting.sh [setup_test_suite] &gt;&quot;$OUT&quot; 2&gt;&amp;1 || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">diff &quot;$FILES_DIR&quot;/test_setup_error.1.out &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">rm -f &quot;$OUT&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;When setup_test fails a failed test error message should be displayed in the main output&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">! INLINE=     run_test_script do_test_error_reporting.sh [setup_test] &gt;&quot;$OUT&quot; 2&gt;&amp;1 || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">diff &quot;$FILES_DIR&quot;/test_setup_error.2.out &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">rm -f &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">! INLINE=true run_test_script do_test_error_reporting.sh [setup_test] &gt;&quot;$OUT&quot; 2&gt;&amp;1 || false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">diff &quot;$FILES_DIR&quot;/test_setup_error.3.out &quot;$OUT&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">rm -f &quot;$OUT&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="64e7f2a3975d1562851f535a28476679b5c6b77a">
  <div class="header">
    <h3>test/test_teardown.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>37</b> relevant lines. 
      <span class="green"><b>37</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Teardown functions should be called&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">run_test_script do_test_teardown.sh</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">OUTFILE=&quot;$LOG_DIR&quot;/do_test_teardown.sh.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">OUTFILE2=&quot;$TEST_SCRIPT_DIR&quot;/.do_test_teardown.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">grep -v &#39;\[test\.sh\]&#39; &quot;$OUTFILE&quot; &gt;&quot;$OUTFILE2&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$OUTFILE2&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="10">
          <span class="hits">1</span>
          
          <code class="ruby">test_01</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test_suite</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$OUTFILE2&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;A failure in teardown_test should not terminate the test with failure&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">run_test_script do_test_teardown.sh teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">OUTFILE=&quot;$LOG_DIR&quot;/do_test_teardown.sh.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">OUTFILE2=&quot;$TEST_SCRIPT_DIR&quot;/.do_test_teardown.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="20">
          <span class="hits">1</span>
          
          <code class="ruby">grep -v &#39;\[test\.sh\]&#39; &quot;$OUTFILE&quot; &gt;&quot;$OUTFILE2&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="21">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$OUTFILE2&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="22">
          <span class="hits">1</span>
          
          <code class="ruby">test_01</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test_suite</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$OUTFILE2&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;A failure in teardown_test_suite should not terminate the test with failure&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="29">
          <span class="hits">1</span>
          
          <code class="ruby">run_test_script do_test_teardown.sh teardown_test_suite</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">OUTFILE=&quot;$LOG_DIR&quot;/do_test_teardown.sh.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">OUTFILE2=&quot;$TEST_SCRIPT_DIR&quot;/.do_test_teardown.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="32">
          <span class="hits">1</span>
          
          <code class="ruby">grep -v &#39;\[test\.sh\]&#39; &quot;$OUTFILE&quot; &gt;&quot;$OUTFILE2&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$OUTFILE2&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="34">
          <span class="hits">1</span>
          
          <code class="ruby">test_01</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="35">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="36">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test_suite</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$OUTFILE2&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="b941657af0408779bdf2db8a766a0ed1eca9a734">
  <div class="header">
    <h3>test/test_teardown_fail.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>16</b> relevant lines. 
      <span class="green"><b>16</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Failing teardown functions should not break the test&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">run_test_script do_test_teardown_fail.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Teardown functions should execute in errexit context&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="8">
          <span class="hits">1</span>
          
          <code class="ruby">OUT=$LOG_DIR/do_test_teardown_fail.sh.out</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="9">
          <span class="hits">3</span>
          
          <code class="ruby">assert_equals 0 &quot;$(grep -c &quot;never reached&quot; &quot;$OUT&quot; || true)&quot; &quot;teardown function in ignored errexit context&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;Teardown functions should print a warning in the main output when they fail&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="12">
          <span class="hits">1</span>
          
          <code class="ruby">OUT=&quot;$TEST_SCRIPT_DIR&quot;/.do_test_teardown_fail.sh.mainout</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">( COLOR=no run_test_script do_test_teardown_fail.sh &gt;&quot;$OUT&quot; )</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="14">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$OUT&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="15">
          <span class="hits">1</span>
          
          <code class="ruby">WARN: teardown_test failed</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="16">
          <span class="hits">1</span>
          
          <code class="ruby">* test_01</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="17">
          <span class="hits">1</span>
          
          <code class="ruby">WARN: teardown_test_suite failed</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="18">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="19">
          <span class="hits">1</span>
          
          <code class="ruby">rm &quot;$OUT&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="a4eac75cf3c40a3cb4839333cc397e7f971c85f3">
  <div class="header">
    <h3>test/test_test_functions.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>74</b> relevant lines. 
      <span class="green"><b>74</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby">define_funcs() {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="6">
          <span class="hits">2</span>
          
          <code class="ruby">  eval &#39;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="7">
          <span class="hits">2</span>
          
          <code class="ruby">setup_test_suite() {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">  echo setup_test_suite &gt;&gt;&quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="11">
          <span class="hits">2</span>
          
          <code class="ruby">teardown_test_suite() {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">  echo teardown_test_suite &gt;&gt;&quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="13">
          <span class="hits">2</span>
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="14">
          <span class="hits">2</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="15">
          <span class="hits">2</span>
          
          <code class="ruby">setup_test() {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="16">
          <span class="hits">2</span>
          
          <code class="ruby">  echo setup_test &gt;&gt;&quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="17">
          <span class="hits">2</span>
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="18">
          <span class="hits">2</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="19">
          <span class="hits">2</span>
          
          <code class="ruby">teardown_test() {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="20">
          <span class="hits">2</span>
          
          <code class="ruby">  echo teardown_test &gt;&gt;&quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="21">
          <span class="hits">2</span>
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="22">
          <span class="hits">2</span>
          
          <code class="ruby">  &#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="24">
          <span class="hits">2</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">unset_funcs() {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="26">
          <span class="hits">2</span>
          
          <code class="ruby">  unset setup_test_suite</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="27">
          <span class="hits">2</span>
          
          <code class="ruby">  unset teardown_test_suite</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="28">
          <span class="hits">4</span>
          
          <code class="ruby">  unset setup_test</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="29">
          <span class="hits">2</span>
          
          <code class="ruby">  unset teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="5" data-linenumber="32">
          <span class="hits">5</span>
          
          <code class="ruby">@test:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="33">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="34">
          <span class="hits">2</span>
          
          <code class="ruby">  [ -z &quot;$test_01_fail&quot; ]</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="35">
          <span class="hits">2</span>
          
          <code class="ruby">  echo test_01 &gt;&gt;&quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="36">
          <span class="hits">4</span>
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="37">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="38">
          <span class="hits">1</span>
          
          <code class="ruby">@test:</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="39">
          <span class="hits">1</span>
          
          <code class="ruby">@body: {</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="40">
          <span class="hits">3</span>
          
          <code class="ruby">  [ -z &quot;$test_02_fail&quot; ]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="41">
          <span class="hits">1</span>
          
          <code class="ruby">  echo test_02 &gt;&gt;&quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="42">
          <span class="hits">1</span>
          
          <code class="ruby">}</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="43">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="44">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;@run_tests should invoke tests and setup methods when there are no failures&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="45">
          <span class="hits">1</span>
          
          <code class="ruby">OUTFILE=&quot;$TEST_SCRIPT_DIR&quot;/.test_test_functions.out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="46">
          <span class="hits">1</span>
          
          <code class="ruby">rm -rf &quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="47">
          <span class="hits">1</span>
          
          <code class="ruby">define_funcs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="48">
          <span class="hits">1</span>
          
          <code class="ruby">( @run_tests 3&gt;&amp;1 )</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="49">
          <span class="hits">1</span>
          
          <code class="ruby">unset_funcs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="50">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="51">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$OUTFILE&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="52">
          <span class="hits">1</span>
          
          <code class="ruby">setup_test_suite</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="53">
          <span class="hits">1</span>
          
          <code class="ruby">setup_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="54">
          <span class="hits">1</span>
          
          <code class="ruby">test_01</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="55">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="56">
          <span class="hits">1</span>
          
          <code class="ruby">setup_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="57">
          <span class="hits">1</span>
          
          <code class="ruby">test_02</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="58">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="59">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test_suite</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="60">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="61">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="62">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;@run_tests should invoke tests and setup methods when there are failures&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="63">
          <span class="hits">1</span>
          
          <code class="ruby">rm -rf &quot;$OUTFILE&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="64">
          <span class="hits">1</span>
          
          <code class="ruby">test_02_fail=1</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="65">
          <span class="hits">1</span>
          
          <code class="ruby">define_funcs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="66">
          <span class="hits">1</span>
          
          <code class="ruby">assert_failure &#39;push_exit_handler &quot;unset _EXPLICIT_EXIT || true&quot;; @run_tests 3&gt;&amp;1&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="67">
          <span class="hits">1</span>
          
          <code class="ruby">unset_funcs</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="68">
          <span class="hits">1</span>
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="69">
          <span class="hits">1</span>
          
          <code class="ruby">diff - &quot;$OUTFILE&quot; &lt;&lt;EOF</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="70">
          <span class="hits">1</span>
          
          <code class="ruby">setup_test_suite</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="71">
          <span class="hits">1</span>
          
          <code class="ruby">setup_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="72">
          <span class="hits">1</span>
          
          <code class="ruby">test_01</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="73">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="74">
          <span class="hits">1</span>
          
          <code class="ruby">setup_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="75">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="76">
          <span class="hits">1</span>
          
          <code class="ruby">teardown_test_suite</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="77">
          <span class="hits">1</span>
          
          <code class="ruby">EOF</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="85ae01bfc716e6e78cf21a8e6658f22224afa918">
  <div class="header">
    <h3>test/test_tmpdir_74.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>10</b> relevant lines. 
      <span class="green"><b>10</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#74: Use TMPDIR for temporary files&quot;</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="5">
          <span class="hits">4</span>
          
          <code class="ruby">export TEST_TMPDIR=&quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/tmp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">mkdir -p &quot;$TEST_TMPDIR&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">VERBOSE= run_test_script do_test_tmpdir_74.sh 2</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="9">
          <span class="hits">1</span>
          
          <code class="ruby">rm -rf &quot;$TEST_TMPDIR&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="11">
          <span class="hits">1</span>
          
          <code class="ruby">mkdir -p &quot;$TEST_TMPDIR&quot;</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="12">
          <span class="hits">2</span>
          
          <code class="ruby">VERBOSE=1 run_test_script do_test_tmpdir_74.sh 2</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="13">
          <span class="hits">1</span>
          
          <code class="ruby">rm -rf &quot;$TEST_TMPDIR&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="0aaea5517b92e10bbc0aa4e6f623cc4a45cec038">
  <div class="header">
    <h3>test/test_validate_value_56.sh</h3>
    <h4><span class="yellow">88.89 %</span> covered</h4>
    <div>
      <b>9</b> relevant lines. 
      <span class="green"><b>8</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="2">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="4">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;validate_value() should print a comma-separated list of allowes values (#56)&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">OUT=&quot;$TEST_SCRIPT_DIR&quot;/testout/do_test_validate_value.sh.out</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="6">
          <span class="hits">3</span>
          
          <code class="ruby">( ! STACK_TRACE=jeronimo COLOR=no run_test_script do_test_validate_value.sh &gt;&quot;$OUT&quot; 2&gt;&amp;1 ) || false</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="7">
          
          
          <code class="ruby">assert_equals \</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="8">
          <span class="hits">2</span>
          
          <code class="ruby">  &quot;[test.sh] configuration exception: invalid value of variable STACK_TRACE: &#39;jeronimo&#39;, allowed values: no, full&quot; \</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="9">
          <span class="hits">2</span>
          
          <code class="ruby">  &quot;$(grep -a &quot;invalid value&quot; &quot;$OUT&quot;)&quot; \</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="10">
          <span class="hits">2</span>
          
          <code class="ruby">  &quot;wrong validation message&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="fe010246a8b1bf573ca439b2eb96deaee12a1149">
  <div class="header">
    <h3>test/test_xxx_tmpfiles_74.sh</h3>
    <h4><span class="green">100.0 %</span> covered</h4>
    <div>
      <b>6</b> relevant lines. 
      <span class="green"><b>6</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="covered" data-hits="1" data-linenumber="1">
          <span class="hits">1</span>
          
          <code class="ruby">#!/bin/bash</code>
        </li>
      
        <li class="covered" data-hits="4" data-linenumber="2">
          <span class="hits">4</span>
          
          <code class="ruby">FILES=$({ find ${TMPDIR:-/tmp} -name tsh-\* 2&gt;/dev/null || true; } | { wc -l || true; })</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="3">
          <span class="hits">3</span>
          
          <code class="ruby">source &quot;$(dirname &quot;$(readlink -f &quot;$0&quot;)&quot;)&quot;/../test.sh</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="5">
          <span class="hits">1</span>
          
          <code class="ruby">start_test &quot;#74: Ensure temporary files are cleaned after running all tests&quot;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="6">
          <span class="hits">1</span>
          
          <code class="ruby">set +e pipefail</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="7">
          <span class="hits">1</span>
          
          <code class="ruby">assert_equals 0 &quot;$FILES&quot; &quot;Temporary files remain&quot;</code>
        </li>
      
    </ol>
  </pre>
</div>

      
      </div>
    </div>
  </body>
</html>
